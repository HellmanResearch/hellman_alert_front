"use strict";(self.webpackChunkssv_front=self.webpackChunkssv_front||[]).push([[1592],{58983:function(e,n,t){n.Z=function(e){e&&e instanceof Function&&t.e(787).then(t.bind(t,787)).then((function(n){var t=n.getCLS,r=n.getFID,o=n.getFCP,s=n.getLCP,a=n.getTTFB;t(e),r(e),o(e),s(e),a(e)}))}},90673:function(e,n,t){t.d(n,{T:function(){return v}});var r=t(74165),o=t(15861),s=t(83958),a=t(50419),i=t(13085),u=t(7477),c=t(55813),d=t.n(c),l=t(59091);u.Z.interceptors.response.use((function(e){var n;if(e.status>299)throw new Error((null===(n=e.data)||void 0===n?void 0:n.detail)||"接口错误");return e}),(function(e){var n,t;if(401==(null===(n=e.response)||void 0===n?void 0:n.status))a.ZP.warning("No permission to access resource");else if(403==(null===(t=e.response)||void 0===t?void 0:t.status)){var r,o,s;i.Z.error({message:"Login expired",description:"".concat((null===(r=e.response)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.detail)||(null===(s=e.response)||void 0===s?void 0:s.data)||e)}),v()}else{var u,c,d,l,p;null!==(u=e.response)&&void 0!==u&&null!==(c=u.data)&&void 0!==c&&c.detail&&i.Z.error({message:"Network Error",description:"".concat((null===(d=e.response)||void 0===d||null===(l=d.data)||void 0===l?void 0:l.detail)||(null===(p=e.response)||void 0===p?void 0:p.data)||e)})}return Promise.reject(e)}));var p=new(d())(d().givenProvider||"ws://some.local-or-remote.node:8546"),v=function(e){return new Promise(e?function(n,t){u.Z.get("".concat(s.bB,"users/users/signature-content?public_key=").concat(e)).then(function(){var t=(0,o.Z)((0,r.Z)().mark((function t(o){var a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.eth.personal.sign(o.data.signature_content,e,"test password!");case 2:(a=t.sent)&&u.Z.get("".concat(s.bB,"users/users/login-signature?public_key=").concat(e,"&signature=").concat(a),{headers:{Cookie:"sessionid=g2kgiwg46urlojurpicv99p2rnx8wnse"}}).then((function(e){n(e),l.Z.dispatch({type:"user/login",payload:e.data})}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}:function(e,n){window.ethereum&&window.ethereum.request({method:"eth_requestAccounts"}).then(function(){var n=(0,o.Z)((0,r.Z)().mark((function n(t){var a;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=t[0],u.Z.get("".concat(s.bB,"users/users/signature-content?public_key=").concat(a)).then(function(){var n=(0,o.Z)((0,r.Z)().mark((function n(t){var o;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p.eth.personal.sign(t.data.signature_content,a,"test password!");case 2:(o=n.sent)&&u.Z.get("".concat(s.bB,"users/users/login-signature?public_key=").concat(a,"&signature=").concat(o)).then((function(n){e(n),l.Z.dispatch({type:"user/login",payload:n.data})}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())})}},59091:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(38823),o=t(1413),s=(0,r.oM)({name:"user",initialState:{},reducers:{login:function(e,n){var t=(0,o.Z)((0,o.Z)({},e),n.payload);return delete t.cancel,n.payload.cancel&&(t={}),localStorage.setItem("login",JSON.stringify(t)),t}}}).reducer,a=(0,r.xC)({reducer:{user:s}})}}]);
//# sourceMappingURL=main-6b882012.b17f1e19.js.map
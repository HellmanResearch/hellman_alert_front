"use strict";(self.webpackChunkssv_front=self.webpackChunkssv_front||[]).push([[6963],{24654:function(e,t,n){var r=n(87462),i=n(44925),a=n(4942),o=n(1413),s=n(93433),u=n(15671),l=n(43144),d=n(97326),c=n(60136),g=n(27277),v=n(85501),f=n(60632),h=n(72791),m=n(75691),p=n(95321),F=n(49544),y=n(14537),Z=["name"],C=[];function k(e,t,n,r,i,a){return"function"===typeof e?e(t,n,"source"in a?{source:a.source}:{}):r!==i}var V=function(e){(0,c.Z)(n,e);var t=(0,g.Z)(n);function n(e){var r;((0,u.Z)(this,n),(r=t.call(this,e)).state={resetCount:0},r.cancelRegisterFunc=null,r.mounted=!1,r.touched=!1,r.dirty=!1,r.validatePromise=null,r.prevValidating=void 0,r.errors=C,r.warnings=C,r.cancelRegister=function(){var e=r.props,t=e.preserve,n=e.isListField,i=e.name;r.cancelRegisterFunc&&r.cancelRegisterFunc(n,t,(0,y.gU)(i)),r.cancelRegisterFunc=null},r.getNamePath=function(){var e=r.props,t=e.name,n=e.fieldContext.prefixName,i=void 0===n?[]:n;return void 0!==t?[].concat((0,s.Z)(i),(0,s.Z)(t)):[]},r.getRules=function(){var e=r.props,t=e.rules,n=void 0===t?[]:t,i=e.fieldContext;return n.map((function(e){return"function"===typeof e?e(i):e}))},r.refresh=function(){r.mounted&&r.setState((function(e){return{resetCount:e.resetCount+1}}))},r.triggerMetaEvent=function(e){var t=r.props.onMetaChange;null===t||void 0===t||t((0,o.Z)((0,o.Z)({},r.getMeta()),{},{destroy:e}))},r.onStoreChange=function(e,t,n){var i=r.props,a=i.shouldUpdate,o=i.dependencies,s=void 0===o?[]:o,u=i.onReset,l=n.store,d=r.getNamePath(),c=r.getValue(e),g=r.getValue(l),v=t&&(0,y.T1)(t,d);switch("valueUpdate"===n.type&&"external"===n.source&&c!==g&&(r.touched=!0,r.dirty=!0,r.validatePromise=null,r.errors=C,r.warnings=C,r.triggerMetaEvent()),n.type){case"reset":if(!t||v)return r.touched=!1,r.dirty=!1,r.validatePromise=null,r.errors=C,r.warnings=C,r.triggerMetaEvent(),null===u||void 0===u||u(),void r.refresh();break;case"remove":if(a)return void r.reRender();break;case"setField":if(v){var f=n.data;return"touched"in f&&(r.touched=f.touched),"validating"in f&&!("originRCField"in f)&&(r.validatePromise=f.validating?Promise.resolve([]):null),"errors"in f&&(r.errors=f.errors||C),"warnings"in f&&(r.warnings=f.warnings||C),r.dirty=!0,r.triggerMetaEvent(),void r.reRender()}if(a&&!d.length&&k(a,e,l,c,g,n))return void r.reRender();break;case"dependenciesUpdate":if(s.map(y.gU).some((function(e){return(0,y.T1)(n.relatedFields,e)})))return void r.reRender();break;default:if(v||(!s.length||d.length||a)&&k(a,e,l,c,g,n))return void r.reRender()}!0===a&&r.reRender()},r.validateRules=function(e){var t=r.getNamePath(),n=r.getValue(),i=Promise.resolve().then((function(){if(!r.mounted)return[];var a=r.props,o=a.validateFirst,u=void 0!==o&&o,l=a.messageVariables,d=(e||{}).triggerName,c=r.getRules();d&&(c=c.filter((function(e){var t=e.validateTrigger;return!t||(0,p.q)(t).includes(d)})));var g=(0,F.N)(t,n,c,e,u,l);return g.catch((function(e){return e})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;if(r.validatePromise===i){var t;r.validatePromise=null;var n=[],a=[];null===(t=e.forEach)||void 0===t||t.call(e,(function(e){var t=e.rule.warningOnly,r=e.errors,i=void 0===r?C:r;t?a.push.apply(a,(0,s.Z)(i)):n.push.apply(n,(0,s.Z)(i))})),r.errors=n,r.warnings=a,r.triggerMetaEvent(),r.reRender()}})),g}));return r.validatePromise=i,r.dirty=!0,r.errors=C,r.warnings=C,r.triggerMetaEvent(),r.reRender(),i},r.isFieldValidating=function(){return!!r.validatePromise},r.isFieldTouched=function(){return r.touched},r.isFieldDirty=function(){return!(!r.dirty&&void 0===r.props.initialValue)||void 0!==(0,r.props.fieldContext.getInternalHooks(m.k).getInitialValue)(r.getNamePath())},r.getErrors=function(){return r.errors},r.getWarnings=function(){return r.warnings},r.isListField=function(){return r.props.isListField},r.isList=function(){return r.props.isList},r.isPreserve=function(){return r.props.preserve},r.getMeta=function(){return r.prevValidating=r.isFieldValidating(),{touched:r.isFieldTouched(),validating:r.prevValidating,errors:r.errors,warnings:r.warnings,name:r.getNamePath()}},r.getOnlyChild=function(e){if("function"===typeof e){var t=r.getMeta();return(0,o.Z)((0,o.Z)({},r.getOnlyChild(e(r.getControlled(),t,r.props.fieldContext))),{},{isFunction:!0})}var n=(0,v.Z)(e);return 1===n.length&&h.isValidElement(n[0])?{child:n[0],isFunction:!1}:{child:n,isFunction:!1}},r.getValue=function(e){var t=r.props.fieldContext.getFieldsValue,n=r.getNamePath();return(0,y.NA)(e||t(!0),n)},r.getControlled=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.props,n=t.trigger,i=t.validateTrigger,s=t.getValueFromEvent,u=t.normalize,l=t.valuePropName,d=t.getValueProps,c=t.fieldContext,g=void 0!==i?i:c.validateTrigger,v=r.getNamePath(),f=c.getInternalHooks,h=c.getFieldsValue,F=f(m.k),Z=F.dispatch,C=r.getValue(),k=d||function(e){return(0,a.Z)({},l,e)},V=e[n],P=(0,o.Z)((0,o.Z)({},e),k(C));P[n]=function(){var e;r.touched=!0,r.dirty=!0,r.triggerMetaEvent();for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e=s?s.apply(void 0,n):y.iZ.apply(void 0,[l].concat(n)),u&&(e=u(e,C,h(!0))),Z({type:"updateValue",namePath:v,value:e}),V&&V.apply(void 0,n)};var R=(0,p.q)(g||[]);return R.forEach((function(e){var t=P[e];P[e]=function(){t&&t.apply(void 0,arguments);var n=r.props.rules;n&&n.length&&Z({type:"validateField",namePath:v,triggerName:e})}})),P},e.fieldContext)&&(0,(0,e.fieldContext.getInternalHooks)(m.k).initEntityValue)((0,d.Z)(r));return r}return(0,l.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.shouldUpdate,n=e.fieldContext;if(this.mounted=!0,n){var r=(0,n.getInternalHooks)(m.k).registerField;this.cancelRegisterFunc=r(this)}!0===t&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var e,t=this.state.resetCount,n=this.props.children,r=this.getOnlyChild(n),i=r.child;return r.isFunction?e=i:h.isValidElement(i)?e=h.cloneElement(i,this.getControlled(i.props)):((0,f.ZP)(!i,"`children` of Field is not validate ReactElement."),e=i),h.createElement(h.Fragment,{key:t},e)}}]),n}(h.Component);V.contextType=m.Z,V.defaultProps={trigger:"onChange",valuePropName:"value"},t.Z=function(e){var t=e.name,n=(0,i.Z)(e,Z),a=h.useContext(m.Z),o=void 0!==t?(0,y.gU)(t):void 0,s="keep";return n.isListField||(s="_".concat((o||[]).join("_"))),h.createElement(V,(0,r.Z)({key:s,name:o},n,{fieldContext:a}))}},75691:function(e,t,n){n.d(t,{k:function(){return a}});var r=n(60632),i=n(72791),a="RC_FORM_INTERNAL_HOOKS",o=function(){(0,r.ZP)(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},s=i.createContext({getFieldValue:o,getFieldsValue:o,getFieldError:o,getFieldWarning:o,getFieldsError:o,isFieldsTouched:o,isFieldTouched:o,isFieldValidating:o,isFieldsValidating:o,resetFields:o,setFields:o,setFieldValue:o,setFieldsValue:o,validateFields:o,submit:o,getInternalHooks:function(){return o(),{dispatch:o,initEntityValue:o,registerField:o,useSubscribe:o,setInitialValues:o,destroyForm:o,setCallbacks:o,registerWatch:o,getFields:o,setValidateMessages:o,setPreserve:o,getInitialValue:o}}});t.Z=s},84432:function(e,t,n){var r=n(87462),i=n(1413),a=n(29439),o=n(44925),s=n(72791),u=n(51437),l=n(75691),d=n(94148),c=n(14537),g=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"];t.Z=function(e,t){var n=e.name,v=e.initialValues,f=e.fields,h=e.form,m=e.preserve,p=e.children,F=e.component,y=void 0===F?"form":F,Z=e.validateMessages,C=e.validateTrigger,k=void 0===C?"onChange":C,V=e.onValuesChange,P=e.onFieldsChange,R=e.onFinish,E=e.onFinishFailed,M=(0,o.Z)(e,g),x=s.useContext(d.Z),w=(0,u.Z)(h),N=(0,a.Z)(w,1)[0],T=N.getInternalHooks(l.k),b=T.useSubscribe,I=T.setInitialValues,U=T.setCallbacks,L=T.setValidateMessages,A=T.setPreserve,H=T.destroyForm;s.useImperativeHandle(t,(function(){return N})),s.useEffect((function(){return x.registerForm(n,N),function(){x.unregisterForm(n)}}),[x,N,n]),L((0,i.Z)((0,i.Z)({},x.validateMessages),Z)),U({onValuesChange:V,onFieldsChange:function(e){if(x.triggerFormChange(n,e),P){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];P.apply(void 0,[e].concat(r))}},onFinish:function(e){x.triggerFormFinish(n,e),R&&R(e)},onFinishFailed:E}),A(m);var O,S=s.useRef(null);I(v,!S.current),S.current||(S.current=!0),s.useEffect((function(){return H}),[]);var _="function"===typeof p;_?O=p(N.getFieldsValue(!0),N):O=p;b(!_);var D=s.useRef();s.useEffect((function(){(0,c.T0)(D.current||[],f||[])||N.setFields(f||[]),D.current=f}),[f,N]);var W=s.useMemo((function(){return(0,i.Z)((0,i.Z)({},N),{},{validateTrigger:k})}),[N,k]),q=s.createElement(l.Z.Provider,{value:W},O);return!1===y?q:s.createElement(y,(0,r.Z)({},M,{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),N.submit()},onReset:function(e){var t;e.preventDefault(),N.resetFields(),null===(t=M.onReset)||void 0===t||t.call(M,e)}}),q)}},94148:function(e,t,n){n.d(t,{R:function(){return s}});var r=n(4942),i=n(1413),a=n(72791),o=a.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),s=function(e){var t=e.validateMessages,n=e.onFormChange,s=e.onFormFinish,u=e.children,l=a.useContext(o),d=a.useRef({});return a.createElement(o.Provider,{value:(0,i.Z)((0,i.Z)({},l),{},{validateMessages:(0,i.Z)((0,i.Z)({},l.validateMessages),t),triggerFormChange:function(e,t){n&&n(e,{changedFields:t,forms:d.current}),l.triggerFormChange(e,t)},triggerFormFinish:function(e,t){s&&s(e,{values:t,forms:d.current}),l.triggerFormFinish(e,t)},registerForm:function(e,t){e&&(d.current=(0,i.Z)((0,i.Z)({},d.current),{},(0,r.Z)({},e,t))),l.registerForm(e,t)},unregisterForm:function(e){var t=(0,i.Z)({},d.current);delete t[e],d.current=t,l.unregisterForm(e)}})},u)};t.Z=o},28247:function(e,t,n){var r=n(1413),i=n(93433),a=n(72791),o=n(60632),s=n(75691),u=n(24654),l=n(14537),d=n(3962);t.Z=function(e){var t=e.name,n=e.initialValue,c=e.children,g=e.rules,v=e.validateTrigger,f=a.useContext(s.Z),h=a.useRef({keys:[],id:0}).current,m=a.useMemo((function(){var e=(0,l.gU)(f.prefixName)||[];return[].concat((0,i.Z)(e),(0,i.Z)((0,l.gU)(t)))}),[f.prefixName,t]),p=a.useMemo((function(){return(0,r.Z)((0,r.Z)({},f),{},{prefixName:m})}),[f,m]),F=a.useMemo((function(){return{getKey:function(e){var t=m.length,n=e[t];return[h.keys[n],e.slice(t+1)]}}}),[m]);if("function"!==typeof c)return(0,o.ZP)(!1,"Form.List only accepts function as children."),null;return a.createElement(d.Z.Provider,{value:F},a.createElement(s.Z.Provider,{value:p},a.createElement(u.Z,{name:[],shouldUpdate:function(e,t,n){return"internal"!==n.source&&e!==t},rules:g,validateTrigger:v,initialValue:n,isList:!0},(function(e,t){var n=e.value,r=void 0===n?[]:n,a=e.onChange,o=f.getFieldValue,s=function(){return o(m||[])||[]},u={add:function(e,t){var n=s();t>=0&&t<=n.length?(h.keys=[].concat((0,i.Z)(h.keys.slice(0,t)),[h.id],(0,i.Z)(h.keys.slice(t))),a([].concat((0,i.Z)(n.slice(0,t)),[e],(0,i.Z)(n.slice(t))))):(h.keys=[].concat((0,i.Z)(h.keys),[h.id]),a([].concat((0,i.Z)(n),[e]))),h.id+=1},remove:function(e){var t=s(),n=new Set(Array.isArray(e)?e:[e]);n.size<=0||(h.keys=h.keys.filter((function(e,t){return!n.has(t)})),a(t.filter((function(e,t){return!n.has(t)}))))},move:function(e,t){if(e!==t){var n=s();e<0||e>=n.length||t<0||t>=n.length||(h.keys=(0,l.pB)(h.keys,e,t),a((0,l.pB)(n,e,t)))}}},d=r||[];return Array.isArray(d)||(d=[]),c(d.map((function(e,t){var n=h.keys[t];return void 0===n&&(h.keys[t]=h.id,n=h.keys[t],h.id+=1),{name:t,key:n,isListField:!0}})),u,t)}))))}},3962:function(e,t,n){var r=n(72791).createContext(null);t.Z=r}}]);
//# sourceMappingURL=6963.6235db07.js.map
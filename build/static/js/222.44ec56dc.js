"use strict";(self.webpackChunkssv_front=self.webpackChunkssv_front||[]).push([[222],{30222:function(t,e,o){var i=o(48609),n=o(76884),s=o(71118),a=o(3229),r=o(475),l=o(51186),h=o(11671),p=o(75671),d=o(14692),f=o(72705),u=o(43865),c=o(13317),g=o(88775),y=o(68154),_=o(71169),m=o(10484),x=o(10481),v=o(37890),w=o(16931),T=o(33313),S=o(6865),C=o(23508),I=o(90964),M=new p.Z({shape:{x:-1,y:-1,width:2,height:2}}),k=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.type=e.type,o}return(0,i.ZT)(e,t),e.prototype.init=function(t,e){if(!s.Z.node&&e.getDom()){var o=t.getComponent("tooltip"),i=this._renderMode=(0,_.U9)(o.get("renderMode"));this._tooltipContent="richText"===i?new r.Z(e):new a.Z(e.getDom(),e,{appendToBody:o.get("appendToBody",!0)})}},e.prototype.render=function(t,e,o){if(!s.Z.node&&o.getDom()){this.group.removeAll(),this._tooltipModel=t,this._ecModel=e,this._api=o,this._alwaysShowContent=t.get("alwaysShowContent");var i=this._tooltipContent;i.update(t),i.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow(),"richText"!==this._renderMode&&t.get("transitionDuration")?(0,I.T9)(this,"_updatePosition",50,"fixRate"):(0,I.ZH)(this,"_updatePosition")}},e.prototype._initGlobalListener=function(){var t=this._tooltipModel.get("triggerOn");c.z("itemTooltip",this._api,(0,n.ak)((function(e,o,i){"none"!==t&&(t.indexOf(e)>=0?this._tryShow(o,i):"leave"===e&&this._hide(i))}),this))},e.prototype._keepShow=function(){var t=this._tooltipModel,e=this._ecModel,o=this._api,i=t.get("triggerOn");if(null!=this._lastX&&null!=this._lastY&&"none"!==i&&"click"!==i){var n=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout((function(){!o.isDisposed()&&n.manuallyShowTip(t,e,o,{x:n._lastX,y:n._lastY,dataByCoordSys:n._lastDataByCoordSys})}))}},e.prototype.manuallyShowTip=function(t,e,o,i){if(i.from!==this.uid&&!s.Z.node&&o.getDom()){var n=b(i,o);this._ticket="";var a=i.dataByCoordSys,r=function(t,e,o){var i=(0,_.zH)(t).queryOptionMap,n=i.keys()[0];if(!n||"series"===n)return;var s,a=(0,_.HZ)(e,n,i.get(n),{useDefault:!1,enableAll:!1,enableNone:!1}).models[0];if(!a)return;if(o.getViewOfComponentModel(a).group.traverse((function(e){var o=(0,v.A)(e).tooltipConfig;if(o&&o.name===t.name)return s=e,!0})),s)return{componentMainType:n,componentIndex:a.componentIndex,el:s}}(i,e,o);if(r){var l=r.el.getBoundingRect().clone();l.applyTransform(r.el.transform),this._tryShow({offsetX:l.x+l.width/2,offsetY:l.y+l.height/2,target:r.el,position:i.position,positionDefault:"bottom"},n)}else if(i.tooltip&&null!=i.x&&null!=i.y){var h=M;h.x=i.x,h.y=i.y,h.update(),(0,v.A)(h).tooltipConfig={name:null,option:i.tooltip},this._tryShow({offsetX:i.x,offsetY:i.y,target:h},n)}else if(a)this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,dataByCoordSys:a,tooltipOption:i.tooltipOption},n);else if(null!=i.seriesIndex){if(this._manuallyAxisShowTip(t,e,o,i))return;var p=(0,d.Z)(i,e),f=p.point[0],u=p.point[1];null!=f&&null!=u&&this._tryShow({offsetX:f,offsetY:u,target:p.el,position:i.position,positionDefault:"bottom"},n)}else null!=i.x&&null!=i.y&&(o.dispatchAction({type:"updateAxisPointer",x:i.x,y:i.y}),this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,target:o.getZr().findHover(i.x,i.y).target},n))}},e.prototype.manuallyHideTip=function(t,e,o,i){var n=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&n.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,i.from!==this.uid&&this._hide(b(i,o))},e.prototype._manuallyAxisShowTip=function(t,e,o,i){var n=i.seriesIndex,s=i.dataIndex,a=e.getComponent("axisPointer").coordSysAxesInfo;if(null!=n&&null!=s&&null!=a){var r=e.getSeriesByIndex(n);if(r)if("axis"===D([r.getData().getItemModel(s),r,(r.coordinateSystem||{}).model],this._tooltipModel).get("trigger"))return o.dispatchAction({type:"updateAxisPointer",seriesIndex:n,dataIndex:s,position:i.position}),!0}},e.prototype._tryShow=function(t,e){var o=t.target;if(this._tooltipModel){this._lastX=t.offsetX,this._lastY=t.offsetY;var i=t.dataByCoordSys;if(i&&i.length)this._showAxisTooltip(i,t);else if(o){var n,s;this._lastDataByCoordSys=null,(0,C.o)(o,(function(t){return null!=(0,v.A)(t).dataIndex?(n=t,!0):null!=(0,v.A)(t).tooltipConfig?(s=t,!0):void 0}),!0),n?this._showSeriesItemTooltip(t,n,e):s?this._showComponentItemTooltip(t,s,e):this._hide(e)}else this._lastDataByCoordSys=null,this._hide(e)}},e.prototype._showOrMove=function(t,e){var o=t.get("showDelay");e=(0,n.ak)(e,this),clearTimeout(this._showTimout),o>0?this._showTimout=setTimeout(e,o):e()},e.prototype._showAxisTooltip=function(t,e){var o=this._ecModel,i=this._tooltipModel,s=[e.offsetX,e.offsetY],a=D([e.tooltipOption],i),r=this._renderMode,h=[],p=(0,S.TX)("section",{blocks:[],noHeader:!0}),d=[],f=new S.iv;(0,n.S6)(t,(function(t){(0,n.S6)(t.dataByAxis,(function(t){var e=o.getComponent(t.axisDim+"Axis",t.axisIndex),s=t.value;if(e&&null!=s){var a=y.gk(s,e.axis,o,t.seriesDataIndices,t.valueLabelOpt),u=(0,S.TX)("section",{header:a,noHeader:!(0,n.fy)(a),sortBlocks:!0,blocks:[]});p.blocks.push(u),(0,n.S6)(t.seriesDataIndices,(function(p){var c=o.getSeriesByIndex(p.seriesIndex),y=p.dataIndexInside,_=c.getDataParams(y);if(!(_.dataIndex<0)){_.axisDim=t.axisDim,_.axisIndex=t.axisIndex,_.axisType=t.axisType,_.axisId=t.axisId,_.axisValue=g.DX(e.axis,{value:s}),_.axisValueLabel=a,_.marker=f.makeTooltipMarker("item",(0,l.Lz)(_.color),r);var m=(0,T.f)(c.formatTooltip(y,!0,null)),x=m.frag;if(x){var v=D([c],i).get("valueFormatter");u.blocks.push(v?(0,n.l7)({valueFormatter:v},x):x)}m.text&&d.push(m.text),h.push(_)}}))}}))})),p.blocks.reverse(),d.reverse();var u=e.position,c=a.get("order"),_=(0,S.BY)(p,f,r,c,o.get("useUTC"),a.get("textStyle"));_&&d.unshift(_);var m="richText"===r?"\n\n":"<br/>",x=d.join(m);this._showOrMove(a,(function(){this._updateContentNotChangedOnAxis(t,h)?this._updatePosition(a,u,s[0],s[1],this._tooltipContent,h):this._showTooltipContent(a,x,h,Math.random()+"",s[0],s[1],u,null,f)}))},e.prototype._showSeriesItemTooltip=function(t,e,o){var i=this._ecModel,s=(0,v.A)(e),a=s.seriesIndex,r=i.getSeriesByIndex(a),h=s.dataModel||r,p=s.dataIndex,d=s.dataType,f=h.getData(d),u=this._renderMode,c=t.positionDefault,g=D([f.getItemModel(p),h,r&&(r.coordinateSystem||{}).model],this._tooltipModel,c?{position:c}:null),y=g.get("trigger");if(null==y||"item"===y){var _=h.getDataParams(p,d),m=new S.iv;_.marker=m.makeTooltipMarker("item",(0,l.Lz)(_.color),u);var x=(0,T.f)(h.formatTooltip(p,!1,d)),w=g.get("order"),C=g.get("valueFormatter"),I=x.frag,M=I?(0,S.BY)(C?(0,n.l7)({valueFormatter:C},I):I,m,u,w,i.get("useUTC"),g.get("textStyle")):x.text,k="item_"+h.name+"_"+p;this._showOrMove(g,(function(){this._showTooltipContent(g,M,_,k,t.offsetX,t.offsetY,t.position,t.target,m)})),o({type:"showTip",dataIndexInside:p,dataIndex:f.getRawIndex(p),seriesIndex:a,from:this.uid})}},e.prototype._showComponentItemTooltip=function(t,e,o){var i=(0,v.A)(e),s=i.tooltipConfig.option||{};if((0,n.HD)(s)){s={content:s,formatter:s}}var a=[s],r=this._ecModel.getComponent(i.componentMainType,i.componentIndex);r&&a.push(r),a.push({formatter:s.content});var l=t.positionDefault,h=D(a,this._tooltipModel,l?{position:l}:null),p=h.get("content"),d=Math.random()+"",f=new S.iv;this._showOrMove(h,(function(){var o=(0,n.d9)(h.get("formatterParams")||{});this._showTooltipContent(h,p,o,d,t.offsetX,t.offsetY,t.position,e,f)})),o({type:"showTip",from:this.uid})},e.prototype._showTooltipContent=function(t,e,o,i,s,a,r,h,p){if(this._ticket="",t.get("showContent")&&t.get("show")){var d=this._tooltipContent;d.setEnterable(t.get("enterable"));var f=t.get("formatter");r=r||t.get("position");var u=e,c=this._getNearestPoint([s,a],o,t.get("trigger"),t.get("borderColor")).color;if(f)if((0,n.HD)(f)){var g=t.ecModel.get("useUTC"),y=(0,n.kJ)(o)?o[0]:o;u=f,y&&y.axisType&&y.axisType.indexOf("time")>=0&&(u=(0,x.WU)(y.axisValue,u,g)),u=(0,l.kF)(u,o,!0)}else if((0,n.mf)(f)){var _=(0,n.ak)((function(e,i){e===this._ticket&&(d.setContent(i,p,t,c,r),this._updatePosition(t,r,s,a,d,o,h))}),this);this._ticket=i,u=f(o,i,_)}else u=f;d.setContent(u,p,t,c,r),d.show(t,c),this._updatePosition(t,r,s,a,d,o,h)}},e.prototype._getNearestPoint=function(t,e,o,i){return"axis"===o||(0,n.kJ)(e)?{color:i||("html"===this._renderMode?"#fff":"none")}:(0,n.kJ)(e)?void 0:{color:i||e.color||e.borderColor}},e.prototype._updatePosition=function(t,e,o,i,s,a,r){var l=this._api.getWidth(),p=this._api.getHeight();e=e||t.get("position");var d=s.getSize(),u=t.get("align"),c=t.get("verticalAlign"),g=r&&r.getBoundingRect().clone();if(r&&g.applyTransform(r.transform),(0,n.mf)(e)&&(e=e([o,i],a,s.el,g,{viewSize:[l,p],contentSize:d.slice()})),(0,n.kJ)(e))o=(0,h.GM)(e[0],l),i=(0,h.GM)(e[1],p);else if((0,n.Kn)(e)){var y=e;y.width=d[0],y.height=d[1];var _=(0,f.ME)(y,{width:l,height:p});o=_.x,i=_.y,u=null,c=null}else if((0,n.HD)(e)&&r){var m=function(t,e,o,i){var n=o[0],s=o[1],a=Math.ceil(Math.SQRT2*i)+8,r=0,l=0,h=e.width,p=e.height;switch(t){case"inside":r=e.x+h/2-n/2,l=e.y+p/2-s/2;break;case"top":r=e.x+h/2-n/2,l=e.y-s-a;break;case"bottom":r=e.x+h/2-n/2,l=e.y+p+a;break;case"left":r=e.x-n-a,l=e.y+p/2-s/2;break;case"right":r=e.x+h+a,l=e.y+p/2-s/2}return[r,l]}(e,g,d,t.get("borderWidth"));o=m[0],i=m[1]}else{m=function(t,e,o,i,n,s,a){var r=o.getSize(),l=r[0],h=r[1];null!=s&&(t+l+s+2>i?t-=l+s:t+=s);null!=a&&(e+h+a>n?e-=h+a:e+=a);return[t,e]}(o,i,s,l,p,u?null:20,c?null:20);o=m[0],i=m[1]}if(u&&(o-=A(u)?d[0]/2:"right"===u?d[0]:0),c&&(i-=A(c)?d[1]/2:"bottom"===c?d[1]:0),(0,w.Pf)(t)){m=function(t,e,o,i,n){var s=o.getSize(),a=s[0],r=s[1];return t=Math.min(t+a,i)-a,e=Math.min(e+r,n)-r,t=Math.max(t,0),e=Math.max(e,0),[t,e]}(o,i,s,l,p);o=m[0],i=m[1]}s.moveTo(o,i)},e.prototype._updateContentNotChangedOnAxis=function(t,e){var o=this._lastDataByCoordSys,i=this._cbParamsList,s=!!o&&o.length===t.length;return s&&(0,n.S6)(o,(function(o,a){var r=o.dataByAxis||[],l=(t[a]||{}).dataByAxis||[];(s=s&&r.length===l.length)&&(0,n.S6)(r,(function(t,o){var a=l[o]||{},r=t.seriesDataIndices||[],h=a.seriesDataIndices||[];(s=s&&t.value===a.value&&t.axisType===a.axisType&&t.axisId===a.axisId&&r.length===h.length)&&(0,n.S6)(r,(function(t,e){var o=h[e];s=s&&t.seriesIndex===o.seriesIndex&&t.dataIndex===o.dataIndex})),i&&(0,n.S6)(t.seriesDataIndices,(function(t){var o=t.seriesIndex,n=e[o],a=i[o];n&&a&&a.data!==n.data&&(s=!1)}))}))})),this._lastDataByCoordSys=t,this._cbParamsList=e,!!s},e.prototype._hide=function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},e.prototype.dispose=function(t,e){!s.Z.node&&e.getDom()&&((0,I.ZH)(this,"_updatePosition"),this._tooltipContent.dispose(),c.E("itemTooltip",e))},e.type="tooltip",e}(m.Z);function D(t,e,o){var i,s=e.ecModel;o?(i=new u.Z(o,s,s),i=new u.Z(e.option,i,s)):i=e;for(var a=t.length-1;a>=0;a--){var r=t[a];r&&(r instanceof u.Z&&(r=r.get("tooltip",!0)),(0,n.HD)(r)&&(r={formatter:r}),r&&(i=new u.Z(r,i,s)))}return i}function b(t,e){return t.dispatchAction||(0,n.ak)(e.dispatchAction,e)}function A(t){return"center"===t||"middle"===t}e.Z=k}}]);
//# sourceMappingURL=222.44ec56dc.js.map
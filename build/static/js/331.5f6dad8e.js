"use strict";(self.webpackChunkssv_front=self.webpackChunkssv_front||[]).push([[331],{62770:function(e,t,r){r.d(t,{Dq:function(){return s},JT:function(){return g},Ss:function(){return f},Wd:function(){return l},md:function(){return u},pY:function(){return c},u7:function(){return v}});var n=r(71169),i=r(76884),o=r(88542),s={Must:1,Might:2,Not:3},a=(0,n.Yf)();function u(e){a(e).datasetMap=(0,i.kW)()}function c(e,t,r){var n={},o=l(t);if(!o||!e)return n;var s,u,c=[],f=[],g=t.ecModel,v=a(g).datasetMap,h=o.uid+"_"+r.seriesLayoutBy;e=e.slice(),(0,i.S6)(e,(function(t,r){var o=(0,i.Kn)(t)?t:e[r]={name:t};"ordinal"===o.type&&null==s&&(s=r,u=m(o)),n[o.name]=[]}));var p=v.get(h)||v.set(h,{categoryWayDim:u,valueWayDim:0});function d(e,t,r){for(var n=0;n<r;n++)e.push(t+n)}function m(e){var t=e.dimsDef;return t?t.length:1}return(0,i.S6)(e,(function(e,t){var r=e.name,i=m(e);if(null==s){var o=p.valueWayDim;d(n[r],o,i),d(f,o,i),p.valueWayDim+=i}else if(s===t)d(n[r],0,i),d(c,0,i);else{o=p.categoryWayDim;d(n[r],o,i),d(f,o,i),p.categoryWayDim+=i}})),c.length&&(n.itemName=c),f.length&&(n.seriesName=f),n}function f(e,t,r){var n={};if(!l(e))return n;var a,u=t.sourceFormat,c=t.dimensionsDefine;u!==o.qb&&u!==o.hL||(0,i.S6)(c,(function(e,t){"name"===((0,i.Kn)(e)?e.name:e)&&(a=t)}));var f=function(){for(var e={},n={},i=[],o=0,f=Math.min(5,r);o<f;o++){var l=h(t.data,u,t.seriesLayoutBy,c,t.startIndex,o);i.push(l);var g=l===s.Not;if(g&&null==e.v&&o!==a&&(e.v=o),(null==e.n||e.n===e.v||!g&&i[e.n]===s.Not)&&(e.n=o),v(e)&&i[e.n]!==s.Not)return e;g||(l===s.Might&&null==n.v&&o!==a&&(n.v=o),null!=n.n&&n.n!==n.v||(n.n=o))}function v(e){return null!=e.v&&null!=e.n}return v(e)?e:v(n)?n:null}();if(f){n.value=[f.v];var g=null!=a?a:f.n;n.itemName=[g],n.seriesName=[g]}return n}function l(e){if(!e.get("data",!0))return(0,n.HZ)(e.ecModel,"dataset",{index:e.get("datasetIndex",!0),id:e.get("datasetId",!0)},n.C6).models[0]}function g(e){return e.get("transform",!0)||e.get("fromTransformResult",!0)?(0,n.HZ)(e.ecModel,"dataset",{index:e.get("fromDatasetIndex",!0),id:e.get("fromDatasetId",!0)},n.C6).models:[]}function v(e,t){return h(e.data,e.sourceFormat,e.seriesLayoutBy,e.dimensionsDefine,e.startIndex,t)}function h(e,t,r,a,u,c){var f,l,g;if((0,i.fU)(e))return s.Not;if(a){var v=a[c];(0,i.Kn)(v)?(l=v.name,g=v.type):(0,i.HD)(v)&&(l=v)}if(null!=g)return"ordinal"===g?s.Must:s.Not;if(t===o.XD){var h=e;if(r===o.Wc){for(var p=h[c],d=0;d<(p||[]).length&&d<5;d++)if(null!=(f=M(p[u+d])))return f}else for(d=0;d<h.length&&d<5;d++){var m=h[u+d];if(m&&null!=(f=M(m[c])))return f}}else if(t===o.qb){var _=e;if(!l)return s.Not;for(d=0;d<_.length&&d<5;d++){if((L=_[d])&&null!=(f=M(L[l])))return f}}else if(t===o.hL){var y=e;if(!l)return s.Not;if(!(p=y[l])||(0,i.fU)(p))return s.Not;for(d=0;d<p.length&&d<5;d++)if(null!=(f=M(p[d])))return f}else if(t===o.cy){var S=e;for(d=0;d<S.length&&d<5;d++){var L=S[d],D=(0,n.C4)(L);if(!(0,i.kJ)(D))return s.Not;if(null!=(f=M(D[c])))return f}}function M(e){var t=(0,i.HD)(e);return null!=e&&isFinite(e)&&""!==e?t?s.Might:s.Not:t&&"-"!==e?s.Must:void 0}return s.Not}},10331:function(e,t,r){r.d(t,{U:function(){return f},t:function(){return l}});var n=r(76884),i=r(93240),o=r(88542),s=r(62770),a=r(4385),u=r(57647),c=r(24305),f=function(){function e(e){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=e}return e.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},e.prototype._setLocalSource=function(e,t){this._sourceList=e,this._upstreamSignList=t,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},e.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},e.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},e.prototype._createSource=function(){this._setLocalSource([],[]);var e,t,r=this._sourceHost,s=this._getUpstreamSourceManagers(),a=!!s.length;if(g(r)){var u=r,c=void 0,f=void 0,l=void 0;if(a){var v=s[0];v.prepareSource(),c=(l=v.getSource()).data,f=l.sourceFormat,t=[v._getVersionSign()]}else c=u.get("data",!0),f=(0,n.fU)(c)?o.J5:o.cy,t=[];var h=this._getSourceMetaRawOption()||{},p=l&&l.metaRawOption||{},d=(0,n.pD)(h.seriesLayoutBy,p.seriesLayoutBy)||null,m=(0,n.pD)(h.sourceHeader,p.sourceHeader),_=(0,n.pD)(h.dimensions,p.dimensions);e=d!==p.seriesLayoutBy||!!m!==!!p.sourceHeader||_?[(0,i._P)(c,{seriesLayoutBy:d,sourceHeader:m,dimensions:_},f)]:[]}else{var y=r;if(a){var S=this._applyTransform(s);e=S.sourceList,t=S.upstreamSignList}else{var L=y.get("source",!0);e=[(0,i._P)(L,this._getSourceMetaRawOption(),null)],t=[]}}this._setLocalSource(e,t)},e.prototype._applyTransform=function(e){var t,r=this._sourceHost,o=r.get("transform",!0),s=r.get("fromTransformResult",!0);if(null!=s){1!==e.length&&v("")}var u=[],c=[];return(0,n.S6)(e,(function(e){e.prepareSource();var t=e.getSource(s||0);null==s||t||v(""),u.push(t),c.push(e._getVersionSign())})),o?t=(0,a.vK)(o,u,{datasetIndex:r.componentIndex}):null!=s&&(t=[(0,i.ML)(u[0])]),{sourceList:t,upstreamSignList:c}},e.prototype._isDirty=function(){if(this._dirty)return!0;for(var e=this._getUpstreamSourceManagers(),t=0;t<e.length;t++){var r=e[t];if(r._isDirty()||this._upstreamSignList[t]!==r._getVersionSign())return!0}},e.prototype.getSource=function(e){e=e||0;var t=this._sourceList[e];if(!t){var r=this._getUpstreamSourceManagers();return r[0]&&r[0].getSource(e)}return t},e.prototype.getSharedDataStore=function(e){var t=e.makeStoreSchema();return this._innerGetDataStore(t.dimensions,e.source,t.hash)},e.prototype._innerGetDataStore=function(e,t,r){var n=this._storeList,i=n[0];i||(i=n[0]={});var o=i[r];if(!o){var s=this._getUpstreamSourceManagers()[0];g(this._sourceHost)&&s?o=s._innerGetDataStore(e,t,r):(o=new u.ZP).initData(new c.Pl(t,e.length),e),i[r]=o}return o},e.prototype._getUpstreamSourceManagers=function(){var e=this._sourceHost;if(g(e)){var t=(0,s.Wd)(e);return t?[t.getSourceManager()]:[]}return(0,n.UI)((0,s.JT)(e),(function(e){return e.getSourceManager()}))},e.prototype._getSourceMetaRawOption=function(){var e,t,r,n=this._sourceHost;if(g(n))e=n.get("seriesLayoutBy",!0),t=n.get("sourceHeader",!0),r=n.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var i=n;e=i.get("seriesLayoutBy",!0),t=i.get("sourceHeader",!0),r=i.get("dimensions",!0)}return{seriesLayoutBy:e,sourceHeader:t,dimensions:r}},e}();function l(e){e.option.transform&&(0,n.s7)(e.option.transform)}function g(e){return"series"===e.mainType}function v(e){throw new Error(e)}}}]);
//# sourceMappingURL=331.5f6dad8e.js.map
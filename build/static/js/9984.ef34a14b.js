"use strict";(self.webpackChunkssv_front=self.webpackChunkssv_front||[]).push([[9984],{56142:function(e,t,i){var n=i(48609),o=i(76884),s=i(84397),a=i(148),r=i(29940),l=i(11671),p=i(8927),u=function(e){function t(){var i=null!==e&&e.apply(this,arguments)||this;return i.type=t.type,i._pieceList=[],i}return(0,n.ZT)(t,e),t.prototype.optionUpdated=function(t,i){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var n=this._mode=this._determineMode();this._pieceList=[],c[this._mode].call(this,this._pieceList),this._resetSelected(t,i);var s=this.option.categories;this.resetVisual((function(e,t){"categories"===n?(e.mappingMethod="category",e.categories=o.d9(s)):(e.dataExtent=this.getExtent(),e.mappingMethod="piecewise",e.pieceList=o.UI(this._pieceList,(function(e){return e=o.d9(e),"inRange"!==t&&(e.visual=null),e})))}))},t.prototype.completeVisualOption=function(){var t=this.option,i={},n=a.Z.listVisualTypes(),s=this.isCategory();function l(e,t,i){return e&&e[t]&&e[t].hasOwnProperty(i)}o.S6(t.pieces,(function(e){o.S6(n,(function(t){e.hasOwnProperty(t)&&(i[t]=1)}))})),o.S6(i,(function(e,i){var n=!1;o.S6(this.stateList,(function(e){n=n||l(t,e,i)||l(t.target,e,i)}),this),!n&&o.S6(this.stateList,(function(e){(t[e]||(t[e]={}))[i]=r.Z.get(i,"inRange"===e?"active":"inactive",s)}))}),this),e.prototype.completeVisualOption.apply(this,arguments)},t.prototype._resetSelected=function(e,t){var i=this.option,n=this._pieceList,s=(t?i:e).selected||{};if(i.selected=s,o.S6(n,(function(e,t){var i=this.getSelectedMapKey(e);s.hasOwnProperty(i)||(s[i]=!0)}),this),"single"===i.selectedMode){var a=!1;o.S6(n,(function(e,t){var i=this.getSelectedMapKey(e);s[i]&&(a?s[i]=!1:a=!0)}),this)}},t.prototype.getItemSymbol=function(){return this.get("itemSymbol")},t.prototype.getSelectedMapKey=function(e){return"categories"===this._mode?e.value+"":e.index+""},t.prototype.getPieceList=function(){return this._pieceList},t.prototype._determineMode=function(){var e=this.option;return e.pieces&&e.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},t.prototype.setSelected=function(e){this.option.selected=o.d9(e)},t.prototype.getValueState=function(e){var t=a.Z.findPieceIndex(e,this._pieceList);return null!=t&&this.option.selected[this.getSelectedMapKey(this._pieceList[t])]?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(e){var t=[],i=this._pieceList;return this.eachTargetSeries((function(n){var o=[],s=n.getData();s.each(this.getDataDimensionIndex(s),(function(t,n){a.Z.findPieceIndex(t,i)===e&&o.push(n)}),this),t.push({seriesId:n.id,dataIndex:o})}),this),t},t.prototype.getRepresentValue=function(e){var t;if(this.isCategory())t=e.value;else if(null!=e.value)t=e.value;else{var i=e.interval||[];t=i[0]===-1/0&&i[1]===1/0?0:(i[0]+i[1])/2}return t},t.prototype.getVisualMeta=function(e){if(!this.isCategory()){var t=[],i=["",""],n=this,s=this._pieceList.slice();if(s.length){var a=s[0].interval[0];a!==-1/0&&s.unshift({interval:[-1/0,a]}),(a=s[s.length-1].interval[1])!==1/0&&s.push({interval:[a,1/0]})}else s.push({interval:[-1/0,1/0]});var r=-1/0;return o.S6(s,(function(e){var t=e.interval;t&&(t[0]>r&&l([r,t[0]],"outOfRange"),l(t.slice()),r=t[1])}),this),{stops:t,outerColors:i}}function l(o,s){var a=n.getRepresentValue({interval:o});s||(s=n.getValueState(a));var r=e(a,s);o[0]===-1/0?i[0]=r:o[1]===1/0?i[1]=r:t.push({value:o[0],color:r},{value:o[1],color:r})}},t.type="visualMap.piecewise",t.defaultOption=(0,p.ZL)(s.Z.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),t}(s.Z),c={splitNumber:function(e){var t=this.option,i=Math.min(t.precision,20),n=this.getExtent(),s=t.splitNumber;s=Math.max(parseInt(s,10),1),t.splitNumber=s;for(var a=(n[1]-n[0])/s;+a.toFixed(i)!==a&&i<5;)i++;t.precision=i,a=+a.toFixed(i),t.minOpen&&e.push({interval:[-1/0,n[0]],close:[0,0]});for(var r=0,p=n[0];r<s;p+=a,r++){var u=r===s-1?n[1]:p+a;e.push({interval:[p,u],close:[1,1]})}t.maxOpen&&e.push({interval:[n[1],1/0],close:[0,0]}),(0,l.nR)(e),o.S6(e,(function(e,t){e.index=t,e.text=this.formatValueText(e.interval)}),this)},categories:function(e){var t=this.option;o.S6(t.categories,(function(t){e.push({text:this.formatValueText(t,!0),value:t})}),this),h(t,e)},pieces:function(e){var t=this.option;o.S6(t.pieces,(function(t,i){o.Kn(t)||(t={value:t});var n={text:"",index:i};if(null!=t.label&&(n.text=t.label),t.hasOwnProperty("value")){var s=n.value=t.value;n.interval=[s,s],n.close=[1,1]}else{for(var r=n.interval=[],l=n.close=[0,0],p=[1,0,1],u=[-1/0,1/0],c=[],h=0;h<2;h++){for(var v=[["gte","gt","min"],["lte","lt","max"]][h],d=0;d<3&&null==r[h];d++)r[h]=t[v[d]],l[h]=p[d],c[h]=2===d;null==r[h]&&(r[h]=u[h])}c[0]&&r[1]===1/0&&(l[0]=0),c[1]&&r[0]===-1/0&&(l[1]=0),r[0]===r[1]&&l[0]&&l[1]&&(n.value=r[0])}n.visual=a.Z.retrieveVisuals(t),e.push(n)}),this),h(t,e),(0,l.nR)(e),o.S6(e,(function(e){var t=e.close,i=[["<","≤"][t[1]],[">","≥"][t[0]]];e.text=e.text||this.formatValueText(null!=e.value?e.value:e.interval,!1,i)}),this)}};function h(e,t){var i=e.inverse;("vertical"===e.orient?!i:i)&&t.reverse()}t.Z=u},90929:function(e,t,i){var n=i(48609),o=i(76884),s=i(96137),a=i(94060),r=i(56114),l=i(12438),p=i(72705),u=i(25073),c=i(8943),h=function(e){function t(){var i=null!==e&&e.apply(this,arguments)||this;return i.type=t.type,i}return(0,n.ZT)(t,e),t.prototype.doRender=function(){var e=this.group;e.removeAll();var t=this.visualMapModel,i=t.get("textGap"),n=t.textStyleModel,s=n.getFont(),l=n.getTextColor(),u=this._getItemAlign(),c=t.itemSize,h=this._getViewData(),v=h.endsText,d=o.Jv(t.get("showLabel",!0),!v);v&&this._renderEndsText(e,v[0],c,d,u),o.S6(h.viewPieceList,(function(n){var p=n.piece,h=new a.Z;h.onclick=o.ak(this._onItemClick,this,p),this._enableHoverLink(h,n.indexInModelPieceList);var v=t.getRepresentValue(p);if(this._createItemSymbol(h,v,[0,0,c[0],c[1]]),d){var f=this.visualMapModel.getValueState(v);h.add(new r.ZP({style:{x:"right"===u?-i:c[0]+i,y:c[1]/2,text:p.text,verticalAlign:"middle",align:u,font:s,fill:l,opacity:"outOfRange"===f?.5:1}}))}e.add(h)}),this),v&&this._renderEndsText(e,v[1],c,d,u),p.BZ(t.get("orient"),e,t.get("itemGap")),this.renderBackground(e),this.positionGroup(e)},t.prototype._enableHoverLink=function(e,t){var i=this;e.on("mouseover",(function(){return n("highlight")})).on("mouseout",(function(){return n("downplay")}));var n=function(e){var n=i.visualMapModel;n.option.hoverLink&&i.api.dispatchAction({type:e,batch:u.H(n.findTargetDataIndices(t),n)})}},t.prototype._getItemAlign=function(){var e=this.visualMapModel,t=e.option;if("vertical"===t.orient)return u.X(e,this.api,e.itemSize);var i=t.align;return i&&"auto"!==i||(i="left"),i},t.prototype._renderEndsText=function(e,t,i,n,o){if(t){var s=new a.Z,l=this.visualMapModel.textStyleModel;s.add(new r.ZP({style:(0,c.Lr)(l,{x:n?"right"===o?i[0]:0:i[0]/2,y:i[1]/2,verticalAlign:"middle",align:n?o:"center",text:t})})),e.add(s)}},t.prototype._getViewData=function(){var e=this.visualMapModel,t=o.UI(e.getPieceList(),(function(e,t){return{piece:e,indexInModelPieceList:t}})),i=e.get("text"),n=e.get("orient"),s=e.get("inverse");return("horizontal"===n?s:!s)?t.reverse():i&&(i=i.slice().reverse()),{viewPieceList:t,endsText:i}},t.prototype._createItemSymbol=function(e,t,i){e.add((0,l.th)(this.getControllerVisual(t,"symbol"),i[0],i[1],i[2],i[3],this.getControllerVisual(t,"color")))},t.prototype._onItemClick=function(e){var t=this.visualMapModel,i=t.option,n=i.selectedMode;if(n){var s=o.d9(i.selected),a=t.getSelectedMapKey(e);"single"===n||!0===n?(s[a]=!0,o.S6(s,(function(e,t){s[t]=t===a}))):s[a]=!s[a],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:s})}},t.type="visualMap.piecewise",t}(s.Z);t.Z=h}}]);
//# sourceMappingURL=9984.ef34a14b.js.map
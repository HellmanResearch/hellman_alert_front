{"version":3,"file":"static/js/8735.df13740c.js","mappings":"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","sources":["../node_modules/echarts/lib/chart/themeRiver/ThemeRiverView.js","../node_modules/echarts/lib/chart/themeRiver/ThemeRiverSeries.js","../node_modules/echarts/lib/chart/themeRiver/themeRiverLayout.js","../node_modules/echarts/lib/chart/themeRiver/install.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { ECPolygon } from '../line/poly.js';\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport { bind } from 'zrender/lib/core/util.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nimport ChartView from '../../view/Chart.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\n\nvar ThemeRiverView =\n/** @class */\nfunction (_super) {\n  __extends(ThemeRiverView, _super);\n\n  function ThemeRiverView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ThemeRiverView.type;\n    _this._layers = [];\n    return _this;\n  }\n\n  ThemeRiverView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var self = this;\n    var group = this.group;\n    var layersSeries = seriesModel.getLayerSeries();\n    var layoutInfo = data.getLayout('layoutInfo');\n    var rect = layoutInfo.rect;\n    var boundaryGap = layoutInfo.boundaryGap;\n    group.x = 0;\n    group.y = rect.y + boundaryGap[0];\n\n    function keyGetter(item) {\n      return item.name;\n    }\n\n    var dataDiffer = new DataDiffer(this._layersSeries || [], layersSeries, keyGetter, keyGetter);\n    var newLayersGroups = [];\n    dataDiffer.add(bind(process, this, 'add')).update(bind(process, this, 'update')).remove(bind(process, this, 'remove')).execute();\n\n    function process(status, idx, oldIdx) {\n      var oldLayersGroups = self._layers;\n\n      if (status === 'remove') {\n        group.remove(oldLayersGroups[idx]);\n        return;\n      }\n\n      var points0 = [];\n      var points1 = [];\n      var style;\n      var indices = layersSeries[idx].indices;\n      var j = 0;\n\n      for (; j < indices.length; j++) {\n        var layout = data.getItemLayout(indices[j]);\n        var x = layout.x;\n        var y0 = layout.y0;\n        var y = layout.y;\n        points0.push(x, y0);\n        points1.push(x, y0 + y);\n        style = data.getItemVisual(indices[j], 'style');\n      }\n\n      var polygon;\n      var textLayout = data.getItemLayout(indices[0]);\n      var labelModel = seriesModel.getModel('label');\n      var margin = labelModel.get('margin');\n      var emphasisModel = seriesModel.getModel('emphasis');\n\n      if (status === 'add') {\n        var layerGroup = newLayersGroups[idx] = new graphic.Group();\n        polygon = new ECPolygon({\n          shape: {\n            points: points0,\n            stackedOnPoints: points1,\n            smooth: 0.4,\n            stackedOnSmooth: 0.4,\n            smoothConstraint: false\n          },\n          z2: 0\n        });\n        layerGroup.add(polygon);\n        group.add(layerGroup);\n\n        if (seriesModel.isAnimationEnabled()) {\n          polygon.setClipPath(createGridClipShape(polygon.getBoundingRect(), seriesModel, function () {\n            polygon.removeClipPath();\n          }));\n        }\n      } else {\n        var layerGroup = oldLayersGroups[oldIdx];\n        polygon = layerGroup.childAt(0);\n        group.add(layerGroup);\n        newLayersGroups[idx] = layerGroup;\n        graphic.updateProps(polygon, {\n          shape: {\n            points: points0,\n            stackedOnPoints: points1\n          }\n        }, seriesModel);\n        saveOldStyle(polygon);\n      }\n\n      setLabelStyle(polygon, getLabelStatesModels(seriesModel), {\n        labelDataIndex: indices[j - 1],\n        defaultText: data.getName(indices[j - 1]),\n        inheritColor: style.fill\n      }, {\n        normal: {\n          verticalAlign: 'middle' // align: 'right'\n\n        }\n      });\n      polygon.setTextConfig({\n        position: null,\n        local: true\n      });\n      var labelEl = polygon.getTextContent(); // TODO More label position options.\n\n      if (labelEl) {\n        labelEl.x = textLayout.x - margin;\n        labelEl.y = textLayout.y0 + textLayout.y / 2;\n      }\n\n      polygon.useStyle(style);\n      data.setItemGraphicEl(idx, polygon);\n      setStatesStylesFromModel(polygon, seriesModel);\n      toggleHoverEmphasis(polygon, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n    }\n\n    this._layersSeries = layersSeries;\n    this._layers = newLayersGroups;\n  };\n\n  ThemeRiverView.type = 'themeRiver';\n  return ThemeRiverView;\n}(ChartView);\n\n; // add animation to the view\n\nfunction createGridClipShape(rect, seriesModel, cb) {\n  var rectEl = new graphic.Rect({\n    shape: {\n      x: rect.x - 10,\n      y: rect.y - 10,\n      width: 0,\n      height: rect.height + 20\n    }\n  });\n  graphic.initProps(rectEl, {\n    shape: {\n      x: rect.x - 50,\n      width: rect.width + 100,\n      height: rect.height + 20\n    }\n  }, seriesModel, cb);\n  return rectEl;\n}\n\nexport default ThemeRiverView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport prepareSeriesDataSchema from '../../data/helper/createDimensions.js';\nimport { getDimensionTypeByAxis } from '../../data/helper/dimensionHelper.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { groupData, SINGLE_REFERRING } from '../../util/model.js';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider.js';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\nvar DATA_NAME_INDEX = 2;\n\nvar ThemeRiverSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(ThemeRiverSeriesModel, _super);\n\n  function ThemeRiverSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ThemeRiverSeriesModel.type;\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  ThemeRiverSeriesModel.prototype.init = function (option) {\n    // eslint-disable-next-line\n    _super.prototype.init.apply(this, arguments); // Put this function here is for the sake of consistency of code style.\n    // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n\n\n    this.legendVisualProvider = new LegendVisualProvider(zrUtil.bind(this.getData, this), zrUtil.bind(this.getRawData, this));\n  };\n  /**\n   * If there is no value of a certain point in the time for some event,set it value to 0.\n   *\n   * @param {Array} data  initial data in the option\n   * @return {Array}\n   */\n\n\n  ThemeRiverSeriesModel.prototype.fixData = function (data) {\n    var rawDataLength = data.length;\n    /**\n     * Make sure every layer data get the same keys.\n     * The value index tells which layer has visited.\n     * {\n     *  2014/01/01: -1\n     * }\n     */\n\n    var timeValueKeys = {}; // grouped data by name\n\n    var groupResult = groupData(data, function (item) {\n      if (!timeValueKeys.hasOwnProperty(item[0] + '')) {\n        timeValueKeys[item[0] + ''] = -1;\n      }\n\n      return item[2];\n    });\n    var layerData = [];\n    groupResult.buckets.each(function (items, key) {\n      layerData.push({\n        name: key,\n        dataList: items\n      });\n    });\n    var layerNum = layerData.length;\n\n    for (var k = 0; k < layerNum; ++k) {\n      var name_1 = layerData[k].name;\n\n      for (var j = 0; j < layerData[k].dataList.length; ++j) {\n        var timeValue = layerData[k].dataList[j][0] + '';\n        timeValueKeys[timeValue] = k;\n      }\n\n      for (var timeValue in timeValueKeys) {\n        if (timeValueKeys.hasOwnProperty(timeValue) && timeValueKeys[timeValue] !== k) {\n          timeValueKeys[timeValue] = k;\n          data[rawDataLength] = [timeValue, 0, name_1];\n          rawDataLength++;\n        }\n      }\n    }\n\n    return data;\n  };\n  /**\n   * @override\n   * @param  option  the initial option that user gived\n   * @param  ecModel  the model object for themeRiver option\n   */\n\n\n  ThemeRiverSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    var singleAxisModel = this.getReferringComponents('singleAxis', SINGLE_REFERRING).models[0];\n    var axisType = singleAxisModel.get('type'); // filter the data item with the value of label is undefined\n\n    var filterData = zrUtil.filter(option.data, function (dataItem) {\n      return dataItem[2] !== undefined;\n    }); // ??? TODO design a stage to transfer data for themeRiver and lines?\n\n    var data = this.fixData(filterData || []);\n    var nameList = [];\n    var nameMap = this.nameMap = zrUtil.createHashMap();\n    var count = 0;\n\n    for (var i = 0; i < data.length; ++i) {\n      nameList.push(data[i][DATA_NAME_INDEX]);\n\n      if (!nameMap.get(data[i][DATA_NAME_INDEX])) {\n        nameMap.set(data[i][DATA_NAME_INDEX], count);\n        count++;\n      }\n    }\n\n    var dimensions = prepareSeriesDataSchema(data, {\n      coordDimensions: ['single'],\n      dimensionsDefine: [{\n        name: 'time',\n        type: getDimensionTypeByAxis(axisType)\n      }, {\n        name: 'value',\n        type: 'float'\n      }, {\n        name: 'name',\n        type: 'ordinal'\n      }],\n      encodeDefine: {\n        single: 0,\n        value: 1,\n        itemName: 2\n      }\n    }).dimensions;\n    var list = new SeriesData(dimensions, this);\n    list.initData(data);\n    return list;\n  };\n  /**\n   * The raw data is divided into multiple layers and each layer\n   *     has same name.\n   */\n\n\n  ThemeRiverSeriesModel.prototype.getLayerSeries = function () {\n    var data = this.getData();\n    var lenCount = data.count();\n    var indexArr = [];\n\n    for (var i = 0; i < lenCount; ++i) {\n      indexArr[i] = i;\n    }\n\n    var timeDim = data.mapDimension('single'); // data group by name\n\n    var groupResult = groupData(indexArr, function (index) {\n      return data.get('name', index);\n    });\n    var layerSeries = [];\n    groupResult.buckets.each(function (items, key) {\n      items.sort(function (index1, index2) {\n        return data.get(timeDim, index1) - data.get(timeDim, index2);\n      });\n      layerSeries.push({\n        name: key,\n        indices: items\n      });\n    });\n    return layerSeries;\n  };\n  /**\n   * Get data indices for show tooltip content\n   */\n\n\n  ThemeRiverSeriesModel.prototype.getAxisTooltipData = function (dim, value, baseAxis) {\n    if (!zrUtil.isArray(dim)) {\n      dim = dim ? [dim] : [];\n    }\n\n    var data = this.getData();\n    var layerSeries = this.getLayerSeries();\n    var indices = [];\n    var layerNum = layerSeries.length;\n    var nestestValue;\n\n    for (var i = 0; i < layerNum; ++i) {\n      var minDist = Number.MAX_VALUE;\n      var nearestIdx = -1;\n      var pointNum = layerSeries[i].indices.length;\n\n      for (var j = 0; j < pointNum; ++j) {\n        var theValue = data.get(dim[0], layerSeries[i].indices[j]);\n        var dist = Math.abs(theValue - value);\n\n        if (dist <= minDist) {\n          nestestValue = theValue;\n          minDist = dist;\n          nearestIdx = layerSeries[i].indices[j];\n        }\n      }\n\n      indices.push(nearestIdx);\n    }\n\n    return {\n      dataIndices: indices,\n      nestestValue: nestestValue\n    };\n  };\n\n  ThemeRiverSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var data = this.getData();\n    var name = data.getName(dataIndex);\n    var value = data.get(data.mapDimension('value'), dataIndex);\n    return createTooltipMarkup('nameValue', {\n      name: name,\n      value: value\n    });\n  };\n\n  ThemeRiverSeriesModel.type = 'series.themeRiver';\n  ThemeRiverSeriesModel.dependencies = ['singleAxis'];\n  ThemeRiverSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    colorBy: 'data',\n    coordinateSystem: 'singleAxis',\n    // gap in axis's orthogonal orientation\n    boundaryGap: ['10%', '10%'],\n    // legendHoverLink: true,\n    singleAxisIndex: 0,\n    animationEasing: 'linear',\n    label: {\n      margin: 4,\n      show: true,\n      position: 'left',\n      fontSize: 11\n    },\n    emphasis: {\n      label: {\n        show: true\n      }\n    }\n  };\n  return ThemeRiverSeriesModel;\n}(SeriesModel);\n\nexport default ThemeRiverSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as numberUtil from '../../util/number.js';\nexport default function themeRiverLayout(ecModel, api) {\n  ecModel.eachSeriesByType('themeRiver', function (seriesModel) {\n    var data = seriesModel.getData();\n    var single = seriesModel.coordinateSystem;\n    var layoutInfo = {}; // use the axis boundingRect for view\n\n    var rect = single.getRect();\n    layoutInfo.rect = rect;\n    var boundaryGap = seriesModel.get('boundaryGap');\n    var axis = single.getAxis();\n    layoutInfo.boundaryGap = boundaryGap;\n\n    if (axis.orient === 'horizontal') {\n      boundaryGap[0] = numberUtil.parsePercent(boundaryGap[0], rect.height);\n      boundaryGap[1] = numberUtil.parsePercent(boundaryGap[1], rect.height);\n      var height = rect.height - boundaryGap[0] - boundaryGap[1];\n      doThemeRiverLayout(data, seriesModel, height);\n    } else {\n      boundaryGap[0] = numberUtil.parsePercent(boundaryGap[0], rect.width);\n      boundaryGap[1] = numberUtil.parsePercent(boundaryGap[1], rect.width);\n      var width = rect.width - boundaryGap[0] - boundaryGap[1];\n      doThemeRiverLayout(data, seriesModel, width);\n    }\n\n    data.setLayout('layoutInfo', layoutInfo);\n  });\n}\n/**\n * The layout information about themeriver\n *\n * @param data  data in the series\n * @param seriesModel  the model object of themeRiver series\n * @param height  value used to compute every series height\n */\n\nfunction doThemeRiverLayout(data, seriesModel, height) {\n  if (!data.count()) {\n    return;\n  }\n\n  var coordSys = seriesModel.coordinateSystem; // the data in each layer are organized into a series.\n\n  var layerSeries = seriesModel.getLayerSeries(); // the points in each layer.\n\n  var timeDim = data.mapDimension('single');\n  var valueDim = data.mapDimension('value');\n  var layerPoints = zrUtil.map(layerSeries, function (singleLayer) {\n    return zrUtil.map(singleLayer.indices, function (idx) {\n      var pt = coordSys.dataToPoint(data.get(timeDim, idx));\n      pt[1] = data.get(valueDim, idx);\n      return pt;\n    });\n  });\n  var base = computeBaseline(layerPoints);\n  var baseLine = base.y0;\n  var ky = height / base.max; // set layout information for each item.\n\n  var n = layerSeries.length;\n  var m = layerSeries[0].indices.length;\n  var baseY0;\n\n  for (var j = 0; j < m; ++j) {\n    baseY0 = baseLine[j] * ky;\n    data.setItemLayout(layerSeries[0].indices[j], {\n      layerIndex: 0,\n      x: layerPoints[0][j][0],\n      y0: baseY0,\n      y: layerPoints[0][j][1] * ky\n    });\n\n    for (var i = 1; i < n; ++i) {\n      baseY0 += layerPoints[i - 1][j][1] * ky;\n      data.setItemLayout(layerSeries[i].indices[j], {\n        layerIndex: i,\n        x: layerPoints[i][j][0],\n        y0: baseY0,\n        y: layerPoints[i][j][1] * ky\n      });\n    }\n  }\n}\n/**\n * Compute the baseLine of the rawdata\n * Inspired by Lee Byron's paper Stacked Graphs - Geometry & Aesthetics\n *\n * @param  data  the points in each layer\n */\n\n\nfunction computeBaseline(data) {\n  var layerNum = data.length;\n  var pointNum = data[0].length;\n  var sums = [];\n  var y0 = [];\n  var max = 0;\n\n  for (var i = 0; i < pointNum; ++i) {\n    var temp = 0;\n\n    for (var j = 0; j < layerNum; ++j) {\n      temp += data[j][i][1];\n    }\n\n    if (temp > max) {\n      max = temp;\n    }\n\n    sums.push(temp);\n  }\n\n  for (var k = 0; k < pointNum; ++k) {\n    y0[k] = (max - sums[k]) / 2;\n  }\n\n  max = 0;\n\n  for (var l = 0; l < pointNum; ++l) {\n    var sum = sums[l] + y0[l];\n\n    if (sum > max) {\n      max = sum;\n    }\n  }\n\n  return {\n    y0: y0,\n    max: max\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport ThemeRiverView from './ThemeRiverView.js';\nimport ThemeRiverSeriesModel from './ThemeRiverSeries.js';\nimport themeRiverLayout from './themeRiverLayout.js';\nimport dataFilter from '../../processor/dataFilter.js';\nexport function install(registers) {\n  registers.registerChartView(ThemeRiverView);\n  registers.registerSeriesModel(ThemeRiverSeriesModel);\n  registers.registerLayout(themeRiverLayout);\n  registers.registerProcessor(dataFilter('themeRiver'));\n}"],"names":["ThemeRiverView","_super","_this","apply","this","arguments","type","_layers","__extends","prototype","render","seriesModel","ecModel","api","data","getData","self","group","layersSeries","getLayerSeries","layoutInfo","getLayout","rect","boundaryGap","keyGetter","item","name","x","y","dataDiffer","DataDiffer","_layersSeries","newLayersGroups","process","status","idx","oldIdx","oldLayersGroups","style","polygon","points0","points1","indices","j","length","layout","getItemLayout","y0","push","getItemVisual","textLayout","margin","getModel","get","emphasisModel","layerGroup","graphic","ECPolygon","shape","points","stackedOnPoints","smooth","stackedOnSmooth","smoothConstraint","z2","add","isAnimationEnabled","setClipPath","cb","rectEl","width","height","removeClipPath","createGridClipShape","getBoundingRect","childAt","saveOldStyle","setLabelStyle","getLabelStatesModels","labelDataIndex","defaultText","getName","inheritColor","fill","normal","verticalAlign","setTextConfig","position","local","labelEl","getTextContent","useStyle","setItemGraphicEl","setStatesStylesFromModel","toggleHoverEmphasis","remove","bind","update","execute","ChartView","ThemeRiverSeriesModel","init","option","legendVisualProvider","LegendVisualProvider","zrUtil","getRawData","fixData","rawDataLength","timeValueKeys","groupResult","groupData","hasOwnProperty","layerData","buckets","each","items","key","dataList","layerNum","k","name_1","timeValue","getInitialData","axisType","getReferringComponents","SINGLE_REFERRING","models","filterData","dataItem","undefined","nameList","nameMap","count","i","set","dimensions","prepareSeriesDataSchema","coordDimensions","dimensionsDefine","getDimensionTypeByAxis","encodeDefine","single","value","itemName","list","SeriesData","initData","lenCount","indexArr","timeDim","mapDimension","index","layerSeries","sort","index1","index2","getAxisTooltipData","dim","baseAxis","nestestValue","minDist","Number","MAX_VALUE","nearestIdx","pointNum","theValue","dist","Math","abs","dataIndices","formatTooltip","dataIndex","multipleSeries","dataType","createTooltipMarkup","dependencies","defaultOption","z","colorBy","coordinateSystem","singleAxisIndex","animationEasing","label","show","fontSize","emphasis","SeriesModel","themeRiverLayout","eachSeriesByType","getRect","axis","getAxis","orient","numberUtil","doThemeRiverLayout","setLayout","baseY0","coordSys","valueDim","layerPoints","singleLayer","pt","dataToPoint","base","sums","max","temp","l","sum","computeBaseline","baseLine","ky","n","m","setItemLayout","layerIndex","install","registers","registerChartView","registerSeriesModel","registerLayout","registerProcessor","dataFilter"],"sourceRoot":""}
"use strict";(self.webpackChunkssv_front=self.webpackChunkssv_front||[]).push([[8174],{38174:function(e,t,o){var n=o(76884),i=o(82938),r=o(11142),a=o(88450),s=o(94060),l=o(52320),u=o(91719),c=o(8509),p=o(6748),g=o(26871),d=o(60886),h=o(15483),f=o(8927),m=o(8943),v=o(37890),y=o(98379),_=o(75624),G=o(71169),S=["rect","circle","line","ellipse","polygon","polyline","path"],M=n.kW(S),w=n.kW(S.concat(["g"])),x=n.kW(S.concat(["g"])),b=(0,G.Yf)();function I(e){var t=e.getItemStyle(),o=e.get("areaColor");return null!=o&&(t.fill=o),t}function T(e){var t=e.style;t&&(t.stroke=t.stroke||t.fill,t.fill=null)}var V=function(){function e(e){var t=new s.Z;this.uid=(0,f.Kr)("ec_map_draw"),this._controller=new i.Z(e.getZr()),this._controllerHost={target:t},this.group=t,t.add(this._regionsGroup=new s.Z),t.add(this._svgGroup=new s.Z)}return e.prototype.draw=function(e,t,o,n,i){var r="geo"===e.mainType,a=e.getData&&e.getData();r&&t.eachComponent({mainType:"series",subType:"map"},(function(t){a||t.getHostGeoModel()!==e||(a=t.getData())}));var s=e.coordinateSystem,u=this._regionsGroup,c=this.group,p=s.getTransformInfo(),g=p.raw,d=p.roam;!u.childAt(0)||i?(c.x=d.x,c.y=d.y,c.scaleX=d.scaleX,c.scaleY=d.scaleY,c.dirty()):l.D(c,d,e);var h=a&&a.getVisual("visualMeta")&&a.getVisual("visualMeta").length>0,f={api:o,geo:s,mapOrGeoModel:e,data:a,isVisualEncodedByVisualMap:h,isGeo:r,transformInfoRaw:g};"geoJSON"===s.resourceType?this._buildGeoJSON(f):"geoSVG"===s.resourceType&&this._buildSVG(f),this._updateController(e,t,o),this._updateMapSelectHandler(e,u,o,n)},e.prototype._buildGeoJSON=function(e){var t=this._regionsGroupByName=n.kW(),o=n.kW(),i=this._regionsGroup,r=e.transformInfoRaw,a=e.mapOrGeoModel,l=e.data,g=e.geo.projection,d=g&&g.stream;function h(e,t){return t&&(e=t(e)),e&&[e[0]*r.scaleX+r.x,e[1]*r.scaleY+r.y]}function f(e){for(var t=[],o=!d&&g&&g.project,n=0;n<e.length;++n){var i=h(e[n],o);i&&t.push(i)}return t}function m(e){return{shape:{points:f(e)}}}i.removeAll(),n.S6(e.geo.regions,(function(r){var f=r.name,v=t.get(f),y=o.get(f)||{},_=y.dataIdx,G=y.regionModel;v||(v=t.set(f,new s.Z),i.add(v),_=l?l.indexOfName(f):null,G=e.isGeo?a.getRegionModel(f):l?l.getItemModel(_):null,o.set(f,{dataIdx:_,regionModel:G}));var S=[],M=[];n.S6(r.geometries,(function(e){if("polygon"===e.type){var t=[e.exterior].concat(e.interiors||[]);d&&(t=Z(t,d)),n.S6(t,(function(e){S.push(new u.Z(m(e)))}))}else{var o=e.points;d&&(o=Z(o,d,!0)),n.S6(o,(function(e){M.push(new c.Z(m(e)))}))}}));var w=h(r.getCenter(),g&&g.project);function x(t,o){if(t.length){var i=new p.Z({culling:!0,segmentIgnoreThreshold:1,shape:{paths:t}});v.add(i),D(e,i,_,G),k(e,i,f,G,a,_,w),o&&(T(i),n.S6(i.states,T))}}x(S),x(M,!0)})),t.each((function(t,n){var i=o.get(n),r=i.dataIdx,s=i.regionModel;C(e,t,n,s,a,r),N(e,t,n,s,a),R(e,t,n,s,a)}),this)},e.prototype._buildSVG=function(e){var t=e.geo.map,o=e.transformInfoRaw;this._svgGroup.x=o.x,this._svgGroup.y=o.y,this._svgGroup.scaleX=o.scaleX,this._svgGroup.scaleY=o.scaleY,this._svgResourceChanged(t)&&(this._freeSVG(),this._useSVG(t));var i=this._svgDispatcherMap=n.kW(),r=!1;n.S6(this._svgGraphicRecord.named,(function(t){var o=t.name,n=e.mapOrGeoModel,a=e.data,s=t.svgNodeTagLower,l=t.el,u=a?a.indexOfName(o):null,c=n.getRegionModel(o);null!=M.get(s)&&l instanceof _.ZP&&D(e,l,u,c),l instanceof _.ZP&&(l.culling=!0),l.z2EmphasisLift=0,t.namedFrom||(null!=x.get(s)&&k(e,l,o,c,n,u,null),C(e,l,o,c,n,u),N(e,l,o,c,n),null!=w.get(s)&&("self"===R(e,l,o,c,n)&&(r=!0),(i.get(o)||i.set(o,[])).push(l)))}),this),this._enableBlurEntireSVG(r,e)},e.prototype._enableBlurEntireSVG=function(e,t){if(e&&t.isGeo){var o=t.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle().opacity;this._svgGraphicRecord.root.traverse((function(e){if(!e.isGroup){(0,d.MA)(e);var t=e.ensureState("blur").style||{};null==t.opacity&&null!=o&&(t.opacity=o),e.ensureState("emphasis")}}))}},e.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},e.prototype.findHighDownDispatchers=function(e,t){if(null==e)return[];var o=t.coordinateSystem;if("geoJSON"===o.resourceType){var n=this._regionsGroupByName;if(n){var i=n.get(e);return i?[i]:[]}}else if("geoSVG"===o.resourceType)return this._svgDispatcherMap&&this._svgDispatcherMap.get(e)||[]},e.prototype._svgResourceChanged=function(e){return this._svgMapName!==e},e.prototype._useSVG=function(e){var t=h.Z.getGeoResource(e);if(t&&"geoSVG"===t.type){var o=t.useGraphic(this.uid);this._svgGroup.add(o.root),this._svgGraphicRecord=o,this._svgMapName=e}},e.prototype._freeSVG=function(){var e=this._svgMapName;if(null!=e){var t=h.Z.getGeoResource(e);t&&"geoSVG"===t.type&&t.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},e.prototype._updateController=function(e,t,o){var i=e.coordinateSystem,s=this._controller,l=this._controllerHost;l.zoomLimit=e.get("scaleLimit"),l.zoom=i.getZoom(),s.enable(e.get("roam")||!1);var u=e.mainType;function c(){var t={type:"geoRoam",componentType:u};return t[u+"Id"]=e.id,t}s.off("pan").on("pan",(function(e){this._mouseDownFlag=!1,r.e(l,e.dx,e.dy),o.dispatchAction(n.l7(c(),{dx:e.dx,dy:e.dy,animation:{duration:0}}))}),this),s.off("zoom").on("zoom",(function(e){this._mouseDownFlag=!1,r.H(l,e.scale,e.originX,e.originY),o.dispatchAction(n.l7(c(),{zoom:e.scale,originX:e.originX,originY:e.originY,animation:{duration:0}}))}),this),s.setPointerChecker((function(t,n,r){return i.containPoint([n,r])&&!(0,a.l)(t,o,e)}))},e.prototype.resetForLabelLayout=function(){this.group.traverse((function(e){var t=e.getTextContent();t&&(t.ignore=b(t).ignore)}))},e.prototype._updateMapSelectHandler=function(e,t,o,n){var i=this;t.off("mousedown"),t.off("click"),e.get("selectedMode")&&(t.on("mousedown",(function(){i._mouseDownFlag=!0})),t.on("click",(function(e){i._mouseDownFlag&&(i._mouseDownFlag=!1)})))},e}();function D(e,t,o,n){var i=n.getModel("itemStyle"),r=n.getModel(["emphasis","itemStyle"]),a=n.getModel(["blur","itemStyle"]),s=n.getModel(["select","itemStyle"]),l=I(i),u=I(r),c=I(s),p=I(a),g=e.data;if(g){var h=g.getItemVisual(o,"style"),f=g.getItemVisual(o,"decal");e.isVisualEncodedByVisualMap&&h.fill&&(l.fill=h.fill),f&&(l.decal=(0,y.I)(f,e.api))}t.setStyle(l),t.style.strokeNoScale=!0,t.ensureState("emphasis").style=u,t.ensureState("select").style=c,t.ensureState("blur").style=p,(0,d.MA)(t)}function k(e,t,o,n,i,r,a){var s=e.data,l=e.isGeo,u=s&&isNaN(s.get(s.mapDimension("value"),r)),c=s&&s.getItemLayout(r);if(l||u||c&&c.showLabel){var p=l?o:r,g=void 0;(!s||r>=0)&&(g=i);var d=a?{normal:{align:"center",verticalAlign:"middle"}}:null;(0,m.ni)(t,(0,m.k3)(n),{labelFetcher:g,labelDataIndex:p,defaultText:o},d);var h=t.getTextContent();if(h&&(b(h).ignore=h.ignore,t.textConfig&&a)){var f=t.getBoundingRect().clone();t.textConfig.layoutRect=f,t.textConfig.position=[(a[0]-f.x)/f.width*100+"%",(a[1]-f.y)/f.height*100+"%"]}t.disableLabelAnimation=!0}else t.removeTextContent(),t.removeTextConfig(),t.disableLabelAnimation=null}function C(e,t,o,n,i,r){e.data?e.data.setItemGraphicEl(r,t):(0,v.A)(t).eventData={componentType:"geo",componentIndex:i.componentIndex,geoIndex:i.componentIndex,name:o,region:n&&n.option||{}}}function N(e,t,o,n,i){e.data||g.setTooltipConfig({el:t,componentModel:i,itemName:o,itemTooltipOption:n.get("tooltip")})}function R(e,t,o,n,i){t.highDownSilentOnTouch=!!i.get("selectedMode");var r=n.getModel("emphasis"),a=r.get("focus");return(0,d.k5)(t,a,r.get("blurScope"),r.get("disabled")),e.isGeo&&(0,d.th)(t,i,o),a}function Z(e,t,o){var i,r=[];function a(){i=[]}function s(){i.length&&(r.push(i),i=[])}var l=t({polygonStart:a,polygonEnd:s,lineStart:a,lineEnd:s,point:function(e,t){isFinite(e)&&isFinite(t)&&i.push([e,t])},sphere:function(){}});return!o&&l.polygonStart(),n.S6(e,(function(e){l.lineStart();for(var t=0;t<e.length;t++)l.point(e[t][0],e[t][1]);l.lineEnd()})),!o&&l.polygonEnd(),r}t.Z=V}}]);
//# sourceMappingURL=8174.cdc62866.js.map
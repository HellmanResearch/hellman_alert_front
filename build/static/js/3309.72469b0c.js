"use strict";(self.webpackChunkssv_front=self.webpackChunkssv_front||[]).push([[3309],{63309:function(t,e,a){var i=a(97057),o=a(52320),n=a(37890),l=a(11671),r=a(98773),s=a(9168),u=a(71169),d=a(76884),p=a(91331),c=a(8943);function y(t){if(t){for(var e=[],a=0;a<t.length;a++)e.push(t[a].slice());return e}}function g(t,e){var a=t.label,i=e&&e.getTextGuideLine();return{dataIndex:t.dataIndex,dataType:t.dataType,seriesIndex:t.seriesModel.seriesIndex,text:t.label.style.text,rect:t.hostRect,labelRect:t.rect,align:a.style.align,verticalAlign:a.style.verticalAlign,labelLinePoints:y(i&&i.shape.points)}}var f=["align","verticalAlign","width","height","fontSize"],h=new r.ZP,v=(0,u.Yf)(),L=(0,u.Yf)();function b(t,e,a){for(var i=0;i<a.length;i++){var o=a[i];null!=e[o]&&(t[o]=e[o])}}var x=["x","y","rotation"],m=function(){function t(){this._labelList=[],this._chartViewList=[]}return t.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},t.prototype._addLabel=function(t,e,a,o,n){var l=o.style,r=o.__hostTarget.textConfig||{},s=o.getComputedTransform(),u=o.getBoundingRect().plain();i.Z.applyTransform(u,u,s),s?h.setLocalTransform(s):(h.x=h.y=h.rotation=h.originX=h.originY=0,h.scaleX=h.scaleY=1);var d,p=o.__hostTarget;if(p){d=p.getBoundingRect().plain();var c=p.getComputedTransform();i.Z.applyTransform(d,d,c)}var y=d&&p.getTextGuideLine();this._labelList.push({label:o,labelLine:y,seriesModel:a,dataIndex:t,dataType:e,layoutOption:n,computedLayoutOption:null,rect:u,hostRect:d,priority:d?d.width*d.height:0,defaultAttr:{ignore:o.ignore,labelGuideIgnore:y&&y.ignore,x:h.x,y:h.y,scaleX:h.scaleX,scaleY:h.scaleY,rotation:h.rotation,style:{x:l.x,y:l.y,align:l.align,verticalAlign:l.verticalAlign,width:l.width,height:l.height,fontSize:l.fontSize},cursor:o.cursor,attachedPos:r.position,attachedRot:r.rotation}})},t.prototype.addLabelsOfSeries=function(t){var e=this;this._chartViewList.push(t);var a=t.__model,i=a.get("labelLayout");((0,d.mf)(i)||(0,d.XP)(i).length)&&t.group.traverse((function(t){if(t.ignore)return!0;var o=t.getTextContent(),l=(0,n.A)(t);o&&!o.disableLabelLayout&&e._addLabel(l.dataIndex,l.dataType,a,o,i)}))},t.prototype.updateLayoutConfig=function(t){var e=t.getWidth(),a=t.getHeight();function i(t,e){return function(){(0,s.d)(t,e)}}for(var o=0;o<this._labelList.length;o++){var n=this._labelList[o],r=n.label,u=r.__hostTarget,p=n.defaultAttr,c=void 0;c=(c=(0,d.mf)(n.layoutOption)?n.layoutOption(g(n,u)):n.layoutOption)||{},n.computedLayoutOption=c;var y=Math.PI/180;u&&u.setTextConfig({local:!1,position:null!=c.x||null!=c.y?null:p.attachedPos,rotation:null!=c.rotate?c.rotate*y:p.attachedRot,offset:[c.dx||0,c.dy||0]});var h=!1;if(null!=c.x?(r.x=(0,l.GM)(c.x,e),r.setStyle("x",0),h=!0):(r.x=p.x,r.setStyle("x",p.style.x)),null!=c.y?(r.y=(0,l.GM)(c.y,a),r.setStyle("y",0),h=!0):(r.y=p.y,r.setStyle("y",p.style.y)),c.labelLinePoints){var L=u.getTextGuideLine();L&&(L.setShape({points:c.labelLinePoints}),h=!1)}v(r).needsUpdateLabelLine=h,r.rotation=null!=c.rotate?c.rotate*y:p.rotation,r.scaleX=p.scaleX,r.scaleY=p.scaleY;for(var b=0;b<f.length;b++){var x=f[b];r.setStyle(x,null!=c[x]?c[x]:p.style[x])}if(c.draggable){if(r.draggable=!0,r.cursor="move",u){var m=n.seriesModel;null!=n.dataIndex&&(m=n.seriesModel.getData(n.dataType).getItemModel(n.dataIndex)),r.on("drag",i(u,m.getModel("labelLine")))}}else r.off("drag"),r.cursor=p.cursor}},t.prototype.layout=function(t){var e=t.getWidth(),a=t.getHeight(),i=(0,p.VT)(this._labelList),o=(0,d.hX)(i,(function(t){return"shiftX"===t.layoutOption.moveOverlap})),n=(0,d.hX)(i,(function(t){return"shiftY"===t.layoutOption.moveOverlap}));(0,p.WE)(o,0,e),(0,p.GI)(n,0,a);var l=(0,d.hX)(i,(function(t){return t.layoutOption.hideOverlap}));(0,p.yl)(l)},t.prototype.processLabelsOverall=function(){var t=this;(0,d.S6)(this._chartViewList,(function(e){var a=e.__model,i=e.ignoreLabelLineUpdate,o=a.isAnimationEnabled();e.group.traverse((function(e){if(e.ignore&&!e.forceLabelAnimation)return!0;var n=!i,l=e.getTextContent();!n&&l&&(n=v(l).needsUpdateLabelLine),n&&t._updateLabelLine(e,a),o&&t._animateLabels(e,a)}))}))},t.prototype._updateLabelLine=function(t,e){var a=t.getTextContent(),i=(0,n.A)(t),o=i.dataIndex;if(a&&null!=o){var l=e.getData(i.dataType),r=l.getItemModel(o),u={},d=l.getItemVisual(o,"style"),p=l.getVisual("drawType");u.stroke=d[p];var c=r.getModel("labelLine");(0,s.Iu)(t,(0,s.$x)(r),u),(0,s.d)(t,c)}},t.prototype._animateLabels=function(t,e){var a=t.getTextContent(),i=t.getTextGuideLine();if(a&&(t.forceLabelAnimation||!a.ignore&&!a.invisible&&!t.disableLabelAnimation&&!(0,o.eq)(t))){var l=(m=v(a)).oldLayout,r=(0,n.A)(t),s=r.dataIndex,u={x:a.x,y:a.y,rotation:a.rotation},p=e.getData(r.dataType);if(l){a.attr(l);var y=t.prevStates;y&&((0,d.cq)(y,"select")>=0&&a.attr(m.oldLayoutSelect),(0,d.cq)(y,"emphasis")>=0&&a.attr(m.oldLayoutEmphasis)),(0,o.D)(a,u,e,s)}else if(a.attr(u),!(0,c.qA)(a).valueAnimation){var g=(0,d.pD)(a.style.opacity,1);a.style.opacity=0,(0,o.KZ)(a,{style:{opacity:g}},e,s)}if(m.oldLayout=u,a.states.select){var f=m.oldLayoutSelect={};b(f,u,x),b(f,a.states.select,x)}if(a.states.emphasis){var h=m.oldLayoutEmphasis={};b(h,u,x),b(h,a.states.emphasis,x)}(0,c.tD)(a,s,p,e,e)}if(i&&!i.ignore&&!i.invisible){l=(m=L(i)).oldLayout;var m,_={points:i.shape.points};l?(i.attr({shape:l}),(0,o.D)(i,{shape:_},e)):(i.setShape(_),i.style.strokePercent=0,(0,o.KZ)(i,{style:{strokePercent:1}},e)),m.oldLayout=_}},t}();e.Z=m}}]);
//# sourceMappingURL=3309.72469b0c.js.map
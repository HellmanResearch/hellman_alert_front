"use strict";(self.webpackChunkssv_front=self.webpackChunkssv_front||[]).push([[1019],{53164:function(e,t,a){var r=a(76884),i=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"];t.Z=function(e){r.S6(i,(function(t){this[t]=r.ak(e[t],e)}),this)}},1019:function(e,t,a){var r=a(76884),i=a(6011),n=a(8927),s=a(91389),o=a(53164),p=a(71169),l=function(){function e(e,t,a,i){this._stageTaskMap=(0,r.kW)(),this.ecInstance=e,this.api=t,a=this._dataProcessorHandlers=a.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=a.concat(i)}return e.prototype.restoreData=function(e,t){e.restoreData(t),this._stageTaskMap.each((function(e){var t=e.overallTask;t&&t.dirty()}))},e.prototype.getPerformArgs=function(e,t){if(e.__pipeline){var a=this._pipelineMap.get(e.__pipeline.id),r=a.context,i=!t&&a.progressiveEnabled&&(!r||r.progressiveRender)&&e.__idxInPipeline>a.blockIndex?a.step:null,n=r&&r.modDataCount;return{step:i,modBy:null!=n?Math.ceil(n/i):null,modDataCount:n}}},e.prototype.getPipeline=function(e){return this._pipelineMap.get(e)},e.prototype.updateStreamModes=function(e,t){var a=this._pipelineMap.get(e.uid),r=e.getData().count(),i=a.progressiveEnabled&&t.incrementalPrepareRender&&r>=a.threshold,n=e.get("large")&&r>=e.get("largeThreshold"),s="mod"===e.get("progressiveChunkMode")?r:null;e.pipelineContext=a.context={progressiveRender:i,modDataCount:s,large:n}},e.prototype.restorePipelines=function(e){var t=this,a=t._pipelineMap=(0,r.kW)();e.eachSeries((function(e){var r=e.getProgressive(),i=e.uid;a.set(i,{id:i,head:null,tail:null,threshold:e.getProgressiveThreshold(),progressiveEnabled:r&&!(e.preventIncremental&&e.preventIncremental()),blockIndex:-1,step:Math.round(r||700),count:0}),t._pipe(e,e.dataTask)}))},e.prototype.prepareStageTasks=function(){var e=this._stageTaskMap,t=this.api.getModel(),a=this.api;(0,r.S6)(this._allHandlers,(function(i){var n=e.get(i.uid)||e.set(i.uid,{});(0,r.hu)(!(i.reset&&i.overallReset),""),i.reset&&this._createSeriesStageTask(i,n,t,a),i.overallReset&&this._createOverallStageTask(i,n,t,a)}),this)},e.prototype.prepareView=function(e,t,a,r){var i=e.renderTask,n=i.context;n.model=t,n.ecModel=a,n.api=r,i.__block=!e.incrementalPrepareRender,this._pipe(t,i)},e.prototype.performDataProcessorTasks=function(e,t){this._performStageTasks(this._dataProcessorHandlers,e,t,{block:!0})},e.prototype.performVisualTasks=function(e,t,a){this._performStageTasks(this._visualHandlers,e,t,a)},e.prototype._performStageTasks=function(e,t,a,i){i=i||{};var n=!1,s=this;function o(e,t){return e.setDirty&&(!e.dirtyMap||e.dirtyMap.get(t.__pipeline.id))}(0,r.S6)(e,(function(e,r){if(!i.visualType||i.visualType===e.visualType){var p=s._stageTaskMap.get(e.uid),l=p.seriesTaskMap,c=p.overallTask;if(c){var u,d=c.agentStubMap;d.each((function(e){o(i,e)&&(e.dirty(),u=!0)})),u&&c.dirty(),s.updatePayload(c,a);var h=s.getPerformArgs(c,i.block);d.each((function(e){e.perform(h)})),c.perform(h)&&(n=!0)}else l&&l.each((function(r,p){o(i,r)&&r.dirty();var l=s.getPerformArgs(r,i.block);l.skip=!e.performRawSeries&&t.isSeriesFiltered(r.context.model),s.updatePayload(r,a),r.perform(l)&&(n=!0)}))}})),this.unfinished=n||this.unfinished},e.prototype.performSeriesTasks=function(e){var t;e.eachSeries((function(e){t=e.dataTask.perform()||t})),this.unfinished=t||this.unfinished},e.prototype.plan=function(){this._pipelineMap.each((function(e){var t=e.tail;do{if(t.__block){e.blockIndex=t.__idxInPipeline;break}t=t.getUpstream()}while(t)}))},e.prototype.updatePayload=function(e,t){"remain"!==t&&(e.context.payload=t)},e.prototype._createSeriesStageTask=function(e,t,a,n){var s=this,o=t.seriesTaskMap,p=t.seriesTaskMap=(0,r.kW)(),l=e.seriesType,c=e.getTargetSeries;function u(t){var r=t.uid,l=p.set(r,o&&o.get(r)||(0,i.v)({plan:f,reset:g,count:_}));l.context={model:t,ecModel:a,api:n,useClearVisual:e.isVisual&&!e.isLayout,plan:e.plan,reset:e.reset,scheduler:s},s._pipe(t,l)}e.createOnAllSeries?a.eachRawSeries(u):l?a.eachRawSeriesByType(l,u):c&&c(a,n).each(u)},e.prototype._createOverallStageTask=function(e,t,a,n){var s=this,o=t.overallTask=t.overallTask||(0,i.v)({reset:c});o.context={ecModel:a,api:n,overallReset:e.overallReset,scheduler:s};var p=o.agentStubMap,l=o.agentStubMap=(0,r.kW)(),d=e.seriesType,f=e.getTargetSeries,g=!0,v=!1;function y(e){var t=e.uid,a=l.set(t,p&&p.get(t)||(v=!0,(0,i.v)({reset:u,onDirty:h})));a.context={model:e,overallProgress:g},a.agent=o,a.__block=g,s._pipe(e,a)}(0,r.hu)(!e.createOnAllSeries,""),d?a.eachRawSeriesByType(d,y):f?f(a,n).each(y):(g=!1,(0,r.S6)(a.getSeries(),y)),v&&o.dirty()},e.prototype._pipe=function(e,t){var a=e.uid,r=this._pipelineMap.get(a);!r.head&&(r.head=t),r.tail&&r.tail.pipe(t),r.tail=t,t.__idxInPipeline=r.count++,t.__pipeline=r},e.wrapStageHandler=function(e,t){return(0,r.mf)(e)&&(e={overallReset:e,seriesType:k(e)}),e.uid=(0,n.Kr)("stageHandler"),t&&(e.visualType=t),e},e}();function c(e){e.overallReset(e.ecModel,e.api,e.payload)}function u(e){return e.overallProgress&&d}function d(){this.agent.dirty(),this.getDownstream().dirty()}function h(){this.agent&&this.agent.dirty()}function f(e){return e.plan?e.plan(e.model,e.ecModel,e.api,e.payload):null}function g(e){e.useClearVisual&&e.data.clearAllVisual();var t=e.resetDefines=(0,p.kF)(e.reset(e.model,e.ecModel,e.api,e.payload));return t.length>1?(0,r.UI)(t,(function(e,t){return y(t)})):v}var v=y(0);function y(e){return function(t,a){var r=a.data,i=a.resetDefines[e];if(i&&i.dataEach)for(var n=t.start;n<t.end;n++)i.dataEach(r,n);else i&&i.progress&&i.progress(t,r)}}function _(e){return e.data.count()}function k(e){T=null;try{e(m,S)}catch(e){}return T}var T,m={},S={};function M(e,t){for(var a in t.prototype)e[a]=r.ZT}M(m,s.Z),M(S,o.Z),m.eachSeriesByType=m.eachRawSeriesByType=function(e){T=e},m.eachComponent=function(e){"series"===e.mainType&&e.subType&&(T=e.subType)},t.Z=l}}]);
//# sourceMappingURL=1019.82a6a91d.js.map
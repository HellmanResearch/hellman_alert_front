"use strict";(self.webpackChunkssv_front=self.webpackChunkssv_front||[]).push([[375],{88697:function(t,e,i){var a=i(48609),o=i(76884),r=i(84397),n=i(11671),s=i(8927),l=[20,140],h=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return(0,a.ZT)(e,t),e.prototype.optionUpdated=function(e,i){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual((function(t){t.mappingMethod="linear",t.dataExtent=this.getExtent()})),this._resetRange()},e.prototype.resetItemSize=function(){t.prototype.resetItemSize.apply(this,arguments);var e=this.itemSize;(null==e[0]||isNaN(e[0]))&&(e[0]=l[0]),(null==e[1]||isNaN(e[1]))&&(e[1]=l[1])},e.prototype._resetRange=function(){var t=this.getExtent(),e=this.option.range;!e||e.auto?(t.auto=1,this.option.range=t):o.kJ(e)&&(e[0]>e[1]&&e.reverse(),e[0]=Math.max(e[0],t[0]),e[1]=Math.min(e[1],t[1]))},e.prototype.completeVisualOption=function(){t.prototype.completeVisualOption.apply(this,arguments),o.S6(this.stateList,(function(t){var e=this.option.controller[t].symbolSize;e&&e[0]!==e[1]&&(e[0]=e[1]/3)}),this)},e.prototype.setSelected=function(t){this.option.range=t.slice(),this._resetRange()},e.prototype.getSelected=function(){var t=this.getExtent(),e=n.dt((this.get("range")||[]).slice());return e[0]>t[1]&&(e[0]=t[1]),e[1]>t[1]&&(e[1]=t[1]),e[0]<t[0]&&(e[0]=t[0]),e[1]<t[0]&&(e[1]=t[0]),e},e.prototype.getValueState=function(t){var e=this.option.range,i=this.getExtent();return(e[0]<=i[0]||e[0]<=t)&&(e[1]>=i[1]||t<=e[1])?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var e=[];return this.eachTargetSeries((function(i){var a=[],o=i.getData();o.each(this.getDataDimensionIndex(o),(function(e,i){t[0]<=e&&e<=t[1]&&a.push(i)}),this),e.push({seriesId:i.id,dataIndex:a})}),this),e},e.prototype.getVisualMeta=function(t){var e=d(0,0,this.getExtent()),i=d(0,0,this.option.range.slice()),a=[];function o(e,i){a.push({value:e,color:t(e,i)})}for(var r=0,n=0,s=i.length,l=e.length;n<l&&(!i.length||e[n]<=i[0]);n++)e[n]<i[r]&&o(e[n],"outOfRange");for(var h=1;r<s;r++,h=0)h&&a.length&&o(i[r],"outOfRange"),o(i[r],"inRange");for(h=1;n<l;n++)(!i.length||i[i.length-1]<e[n])&&(h&&(a.length&&o(a[a.length-1].value,"outOfRange"),h=0),o(e[n],"outOfRange"));var p=a.length;return{stops:a,outerColors:[p?a[0].color:"transparent",p?a[p-1].color:"transparent"]}},e.type="visualMap.continuous",e.defaultOption=(0,s.ZL)(r.Z.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),e}(r.Z);function d(t,e,i){if(i[0]===i[1])return i.slice();for(var a=(i[1]-i[0])/200,o=i[0],r=[],n=0;n<=200&&o<i[1];n++)r.push(o),o+=a;return r.push(i[1]),r}e.Z=h},79370:function(t,e,i){var a=i(48609),o=i(76884),r=i(65737),n=i(43100),s=i(96137),l=i(56114),h=i(94060),d=i(75671),p=i(26871),u=i(91719),c=i(11671),v=i(9373),f=i(25073),g=i(71169),_=i(15849),y=i(60886),m=i(12438),S=i(44046),M=i(37890),b=i(8943),x=i(23508),I=c.NU,L=o.S6,T=Math.min,k=Math.max,w=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i._shapes={},i._dataInterval=[],i._handleEnds=[],i._hoverLinkDataIndices=[],i}return(0,a.ZT)(e,t),e.prototype.doRender=function(t,e,i,a){this._api=i,a&&"selectDataRange"===a.type&&a.from===this.uid||this._buildView()},e.prototype._buildView=function(){this.group.removeAll();var t=this.visualMapModel,e=this.group;this._orient=t.get("orient"),this._useHandle=t.get("calculable"),this._resetInterval(),this._renderBar(e);var i=t.get("text");this._renderEndsText(e,i,0),this._renderEndsText(e,i,1),this._updateView(!0),this.renderBackground(e),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(e)},e.prototype._renderEndsText=function(t,e,i){if(e){var a=e[1-i];a=null!=a?a+"":"";var o=this.visualMapModel,r=o.get("textGap"),n=o.itemSize,s=this._shapes.mainGroup,h=this._applyTransform([n[0]/2,0===i?-r:n[1]+r],s),d=this._applyTransform(0===i?"bottom":"top",s),p=this._orient,u=this.visualMapModel.textStyleModel;this.group.add(new l.ZP({style:(0,b.Lr)(u,{x:h[0],y:h[1],verticalAlign:"horizontal"===p?"middle":d,align:"horizontal"===p?d:"center",text:a})}))}},e.prototype._renderBar=function(t){var e=this.visualMapModel,i=this._shapes,a=e.itemSize,r=this._orient,n=this._useHandle,s=f.X(e,this.api,a),l=i.mainGroup=this._createBarGroup(s),p=new h.Z;l.add(p),p.add(i.outOfRange=H()),p.add(i.inRange=H(null,n?V(this._orient):null,o.ak(this._dragHandle,this,"all",!1),o.ak(this._dragHandle,this,"all",!0))),p.setClipPath(new d.Z({shape:{x:0,y:0,width:a[0],height:a[1],r:3}}));var u=e.textStyleModel.getTextRect("国"),c=k(u.width,u.height);n&&(i.handleThumbs=[],i.handleLabels=[],i.handleLabelPoints=[],this._createHandle(e,l,0,a,c,r),this._createHandle(e,l,1,a,c,r)),this._createIndicator(e,l,a,c,r),t.add(l)},e.prototype._createHandle=function(t,e,i,a,r,s){var h=o.ak(this._dragHandle,this,i,!1),d=o.ak(this._dragHandle,this,i,!0),p=(0,_.GM)(t.get("handleSize"),a[0]),u=(0,m.th)(t.get("handleIcon"),-p/2,-p/2,p,p,null,!0),c=V(this._orient);u.attr({cursor:c,draggable:!0,drift:h,ondragend:d,onmousemove:function(t){n.sT(t.event)}}),u.x=a[0]/2,u.useStyle(t.getModel("handleStyle").getItemStyle()),u.setStyle({strokeNoScale:!0,strokeFirst:!0}),u.style.lineWidth*=2,u.ensureState("emphasis").style=t.getModel(["emphasis","handleStyle"]).getItemStyle(),(0,y.Nj)(u,!0),e.add(u);var v=this.visualMapModel.textStyleModel,f=new l.ZP({cursor:c,draggable:!0,drift:h,onmousemove:function(t){n.sT(t.event)},ondragend:d,style:(0,b.Lr)(v,{x:0,y:0,text:""})});f.ensureState("blur").style={opacity:.1},f.stateTransition={duration:200},this.group.add(f);var g=[p,0],S=this._shapes;S.handleThumbs[i]=u,S.handleLabelPoints[i]=g,S.handleLabels[i]=f},e.prototype._createIndicator=function(t,e,i,a,r){var n=(0,_.GM)(t.get("indicatorSize"),i[0]),s=(0,m.th)(t.get("indicatorIcon"),-n/2,-n/2,n,n,null,!0);s.attr({cursor:"move",invisible:!0,silent:!0,x:i[0]/2});var h=t.getModel("indicatorStyle").getItemStyle();if(s instanceof S.ZP){var d=s.style;s.useStyle(o.l7({image:d.image,x:d.x,y:d.y,width:d.width,height:d.height},h))}else s.useStyle(h);e.add(s);var p=this.visualMapModel.textStyleModel,u=new l.ZP({silent:!0,invisible:!0,style:(0,b.Lr)(p,{x:0,y:0,text:""})});this.group.add(u);var c=[("horizontal"===r?a/2:6)+i[0]/2,0],v=this._shapes;v.indicator=s,v.indicatorLabel=u,v.indicatorLabelPoint=c,this._firstShowIndicator=!0},e.prototype._dragHandle=function(t,e,i,a){if(this._useHandle){if(this._dragging=!e,!e){var o=this._applyTransform([i,a],this._shapes.mainGroup,!0);this._updateInterval(t,o[1]),this._hideIndicator(),this._updateView()}e===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),e?!this._hovering&&this._clearHoverLinkToSeries():z(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[t],!1)}},e.prototype._resetInterval=function(){var t=this.visualMapModel,e=this._dataInterval=t.getSelected(),i=t.getExtent(),a=[0,t.itemSize[1]];this._handleEnds=[I(e[0],i,a,!0),I(e[1],i,a,!0)]},e.prototype._updateInterval=function(t,e){e=e||0;var i=this.visualMapModel,a=this._handleEnds,o=[0,i.itemSize[1]];(0,v.Z)(e,a,o,t,0);var r=i.getExtent();this._dataInterval=[I(a[0],o,r,!0),I(a[1],o,r,!0)]},e.prototype._updateView=function(t){var e=this.visualMapModel,i=e.getExtent(),a=this._shapes,o=[0,e.itemSize[1]],r=t?o:this._handleEnds,n=this._createBarVisual(this._dataInterval,i,r,"inRange"),s=this._createBarVisual(i,i,o,"outOfRange");a.inRange.setStyle({fill:n.barColor}).setShape("points",n.barPoints),a.outOfRange.setStyle({fill:s.barColor}).setShape("points",s.barPoints),this._updateHandle(r,n)},e.prototype._createBarVisual=function(t,e,i,a){var o={forceState:a,convertOpacityToAlpha:!0},n=this._makeColorGradient(t,o),s=[this.getControllerVisual(t[0],"symbolSize",o),this.getControllerVisual(t[1],"symbolSize",o)],l=this._createBarPoints(i,s);return{barColor:new r.Z(0,0,0,1,n),barPoints:l,handlesColor:[n[0].color,n[n.length-1].color]}},e.prototype._makeColorGradient=function(t,e){var i=[],a=(t[1]-t[0])/100;i.push({color:this.getControllerVisual(t[0],"color",e),offset:0});for(var o=1;o<100;o++){var r=t[0]+a*o;if(r>t[1])break;i.push({color:this.getControllerVisual(r,"color",e),offset:o/100})}return i.push({color:this.getControllerVisual(t[1],"color",e),offset:1}),i},e.prototype._createBarPoints=function(t,e){var i=this.visualMapModel.itemSize;return[[i[0]-e[0],t[0]],[i[0],t[0]],[i[0],t[1]],[i[0]-e[1],t[1]]]},e.prototype._createBarGroup=function(t){var e=this._orient,i=this.visualMapModel.get("inverse");return new h.Z("horizontal"!==e||i?"horizontal"===e&&i?{scaleX:"bottom"===t?-1:1,rotation:-Math.PI/2}:"vertical"!==e||i?{scaleX:"left"===t?1:-1}:{scaleX:"left"===t?1:-1,scaleY:-1}:{scaleX:"bottom"===t?1:-1,rotation:Math.PI/2})},e.prototype._updateHandle=function(t,e){if(this._useHandle){var i=this._shapes,a=this.visualMapModel,o=i.handleThumbs,r=i.handleLabels,n=a.itemSize,s=a.getExtent();L([0,1],(function(l){var h=o[l];h.setStyle("fill",e.handlesColor[l]),h.y=t[l];var d=I(t[l],[0,n[1]],s,!0),u=this.getControllerVisual(d,"symbolSize");h.scaleX=h.scaleY=u/n[0],h.x=n[0]-u/2;var c=p.applyTransform(i.handleLabelPoints[l],p.getTransform(h,this.group));r[l].setStyle({x:c[0],y:c[1],text:a.formatValueText(this._dataInterval[l]),verticalAlign:"middle",align:"vertical"===this._orient?this._applyTransform("left",i.mainGroup):"center"})}),this)}},e.prototype._showIndicator=function(t,e,i,a){var o=this.visualMapModel,r=o.getExtent(),n=o.itemSize,s=[0,n[1]],l=this._shapes,h=l.indicator;if(h){h.attr("invisible",!1);var d=this.getControllerVisual(t,"color",{convertOpacityToAlpha:!0}),u=this.getControllerVisual(t,"symbolSize"),c=I(t,r,s,!0),v=n[0]-u/2,f={x:h.x,y:h.y};h.y=c,h.x=v;var g=p.applyTransform(l.indicatorLabelPoint,p.getTransform(h,this.group)),_=l.indicatorLabel;_.attr("invisible",!1);var y=this._applyTransform("left",l.mainGroup),m="horizontal"===this._orient;_.setStyle({text:(i||"")+o.formatValueText(e),verticalAlign:m?y:"middle",align:m?"center":y});var S={x:v,y:c,style:{fill:d}},M={style:{x:g[0],y:g[1]}};if(o.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var b={duration:100,easing:"cubicInOut",additive:!0};h.x=f.x,h.y=f.y,h.animateTo(S,b),_.animateTo(M,b)}else h.attr(S),_.attr(M);this._firstShowIndicator=!1;var x=this._shapes.handleLabels;if(x)for(var L=0;L<x.length;L++)this._api.enterBlur(x[L])}},e.prototype._enableHoverLinkToSeries=function(){var t=this;this._shapes.mainGroup.on("mousemove",(function(e){if(t._hovering=!0,!t._dragging){var i=t.visualMapModel.itemSize,a=t._applyTransform([e.offsetX,e.offsetY],t._shapes.mainGroup,!0,!0);a[1]=T(k(0,a[1]),i[1]),t._doHoverLinkToSeries(a[1],0<=a[0]&&a[0]<=i[0])}})).on("mouseout",(function(){t._hovering=!1,!t._dragging&&t._clearHoverLinkToSeries()}))},e.prototype._enableHoverLinkFromSeries=function(){var t=this.api.getZr();this.visualMapModel.option.hoverLink?(t.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),t.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},e.prototype._doHoverLinkToSeries=function(t,e){var i=this.visualMapModel,a=i.itemSize;if(i.option.hoverLink){var o=[0,a[1]],r=i.getExtent();t=T(k(o[0],t),o[1]);var n=function(t,e,i){var a=6,o=t.get("hoverLinkDataSize");return o&&(a=I(o,e,i,!0)/2),a}(i,r,o),s=[t-n,t+n],l=I(t,o,r,!0),h=[I(s[0],o,r,!0),I(s[1],o,r,!0)];s[0]<o[0]&&(h[0]=-1/0),s[1]>o[1]&&(h[1]=1/0),e&&(h[0]===-1/0?this._showIndicator(l,h[1],"< ",n):h[1]===1/0?this._showIndicator(l,h[0],"> ",n):this._showIndicator(l,l,"≈ ",n));var d=this._hoverLinkDataIndices,p=[];(e||z(i))&&(p=this._hoverLinkDataIndices=i.findTargetDataIndices(h));var u=g.XI(d,p);this._dispatchHighDown("downplay",f.H(u[0],i)),this._dispatchHighDown("highlight",f.H(u[1],i))}},e.prototype._hoverLinkFromSeriesMouseOver=function(t){var e;if((0,x.o)(t.target,(function(t){var i=(0,M.A)(t);if(null!=i.dataIndex)return e=i,!0}),!0),e){var i=this.ecModel.getSeriesByIndex(e.seriesIndex),a=this.visualMapModel;if(a.isTargetSeries(i)){var o=i.getData(e.dataType),r=o.getStore().get(a.getDataDimensionIndex(o),e.dataIndex);isNaN(r)||this._showIndicator(r,r)}}},e.prototype._hideIndicator=function(){var t=this._shapes;t.indicator&&t.indicator.attr("invisible",!0),t.indicatorLabel&&t.indicatorLabel.attr("invisible",!0);var e=this._shapes.handleLabels;if(e)for(var i=0;i<e.length;i++)this._api.leaveBlur(e[i])},e.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",f.H(t,this.visualMapModel)),t.length=0},e.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var t=this.api.getZr();t.off("mouseover",this._hoverLinkFromSeriesMouseOver),t.off("mouseout",this._hideIndicator)},e.prototype._applyTransform=function(t,e,i,a){var r=p.getTransform(e,a?null:this.group);return o.kJ(t)?p.applyTransform(t,r,i):p.transformDirection(t,r,i)},e.prototype._dispatchHighDown=function(t,e){e&&e.length&&this.api.dispatchAction({type:t,batch:e})},e.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},e.prototype.remove=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},e.type="visualMap.continuous",e}(s.Z);function H(t,e,i,a){return new u.Z({shape:{points:t},draggable:!!i,cursor:e,drift:i,onmousemove:function(t){n.sT(t.event)},ondragend:a})}function z(t){var e=t.get("hoverLinkOnHandle");return!!(null==e?t.get("realtime"):e)}function V(t){return"vertical"===t?"ns-resize":"ew-resize"}e.Z=w}}]);
//# sourceMappingURL=375.c8b693ba.js.map
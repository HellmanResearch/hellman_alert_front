"use strict";(self.webpackChunkssv_front=self.webpackChunkssv_front||[]).push([[2048],{22048:function(e,t,o){var i=o(48609),n=o(76884),r=o(94060),a=o(75671),s=o(37890),d=o(60886),l=o(32911),h=o(44390),u=o(49649),c=o(82938),p=o(97057),f=o(21432),g=o(42293),y=o(76592),v=o(52037),m=o(75624),w=o(71169),x=o(51186),_=o(8943),b=r.Z,I=a.Z,S="label",M="upperLabel",T=10*d.zr,k=2*d.zr,C=3*d.zr,N=(0,y.Z)([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),R=function(e){var t=N(e);return t.stroke=t.fill=t.lineWidth=null,t},G=(0,w.Yf)(),Z=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.type=t.type,o._state="ready",o._storage={nodeGroup:[],background:[],content:[]},o}return(0,i.ZT)(t,e),t.prototype.render=function(e,t,o,i){var r=t.findComponents({mainType:"series",subType:"treemap",query:i});if(!((0,n.cq)(r,e)<0)){this.seriesModel=e,this.api=o,this.ecModel=t;var a=h.d1(i,["treemapZoomToNode","treemapRootToNode"],e),s=i&&i.type,d=e.layoutInfo,l=!this._oldTree,u=this._storage,c="treemapRootToNode"===s&&a&&u?{rootNodeGroup:u.nodeGroup[a.node.getRawIndex()],direction:i.direction}:null,p=this._giveContainerGroup(d),f=e.get("animation"),g=this._doRender(p,e,c);!f||l||s&&"treemapZoomToNode"!==s&&"treemapRootToNode"!==s?g.renderFinally():this._doAnimation(p,g,e,c),this._resetController(o),this._renderBreadcrumb(e,o,a)}},t.prototype._giveContainerGroup=function(e){var t=this._containerGroup;return t||(t=this._containerGroup=new b,this._initEvents(t),this.group.add(t)),t.x=e.x,t.y=e.y,t},t.prototype._doRender=function(e,t,o){var i=t.getData().tree,a=this._oldTree,h={nodeGroup:[],background:[],content:[]},u={nodeGroup:[],background:[],content:[]},c=this._storage,p=[];function f(e,i,a,l){return function(e,t,o,i,a,l,h,u,c,p){if(h){var f=h.getLayout(),g=e.getData(),y=h.getModel();if(g.setItemGraphicEl(h.dataIndex,null),f&&f.isInView){var v=f.width,x=f.height,Z=f.borderWidth,A=f.invisible,D=h.getRawIndex(),L=u&&u.getRawIndex(),W=h.viewChildren,z=f.upperHeight,Y=W&&W.length,E=y.getModel("itemStyle"),X=y.getModel(["emphasis","itemStyle"]),H=y.getModel(["blur","itemStyle"]),V=y.getModel(["select","itemStyle"]),F=E.get("borderRadius")||0,O=te("nodeGroup",b);if(O){if(c.add(O),O.x=f.x||0,O.y=f.y||0,O.markRedraw(),G(O).nodeWidth=v,G(O).nodeHeight=x,f.isAboveViewRoot)return O;var j=te("background",I,p,k);j&&function(t,o,i){var n=(0,s.A)(o);if(n.dataIndex=h.dataIndex,n.seriesIndex=e.seriesIndex,o.setShape({x:0,y:0,width:v,height:x,r:F}),A)Q(o);else{o.invisible=!1;var r=h.getVisual("style"),a=r.stroke,l=R(E);l.fill=a;var u=N(X);u.fill=X.get("borderColor");var c=N(H);c.fill=H.get("borderColor");var p=N(V);if(p.fill=V.get("borderColor"),i){var f=v-2*Z;$(o,a,r.opacity,{x:Z,y:0,width:f,height:z})}else o.removeTextContent();o.setStyle(l),o.ensureState("emphasis").style=u,o.ensureState("blur").style=c,o.ensureState("select").style=p,(0,d.MA)(o)}t.add(o)}(O,j,Y&&f.upperLabelHeight);var P=y.getModel("emphasis"),U=P.get("focus"),B=P.get("blurScope"),q=P.get("disabled"),J="ancestor"===U?h.getAncestorsIndices():"descendant"===U?h.getDescendantIndices():U;if(Y)(0,d.Av)(O)&&(0,d.Nj)(O,!1),j&&((0,d.Nj)(j,!q),g.setItemGraphicEl(h.dataIndex,j),(0,d.Ib)(j,J,B));else{var K=te("content",I,p,C);K&&function(t,o){var i=(0,s.A)(o);i.dataIndex=h.dataIndex,i.seriesIndex=e.seriesIndex;var n=Math.max(v-2*Z,0),r=Math.max(x-2*Z,0);if(o.culling=!0,o.setShape({x:Z,y:Z,width:n,height:r,r:F}),A)Q(o);else{o.invisible=!1;var a=h.getVisual("style"),l=a.fill,u=R(E);u.fill=l,u.decal=a.decal;var c=N(X),p=N(H),f=N(V);$(o,l,a.opacity,null),o.setStyle(u),o.ensureState("emphasis").style=c,o.ensureState("blur").style=p,o.ensureState("select").style=f,(0,d.MA)(o)}t.add(o)}(O,K),j.disableMorphing=!0,j&&(0,d.Av)(j)&&(0,d.Nj)(j,!1),(0,d.Nj)(O,!q),g.setItemGraphicEl(h.dataIndex,O),(0,d.Ib)(O,J,B)}return O}}}function Q(e){!e.invisible&&l.push(e)}function $(t,o,i,r){var a=y.getModel(r?M:S),s=(0,w.U5)(y.get("name"),null),d=a.getShallow("show");(0,_.ni)(t,(0,_.k3)(y,r?M:S),{defaultText:d?s:null,inheritColor:o,defaultOpacity:i,labelFetcher:e,labelDataIndex:h.dataIndex});var l=t.getTextContent();if(l){var u=l.style,c=(0,n.MY)(u.padding||0);r&&(t.setTextConfig({layoutRect:r}),l.disableLabelLayout=!0),l.beforeUpdate=function(){var e=Math.max((r?r.width:t.shape.width)-c[1]-c[3],0),o=Math.max((r?r.height:t.shape.height)-c[0]-c[2],0);u.width===e&&u.height===o||l.setStyle({width:e,height:o})},u.truncateMinChar=2,u.lineOverflow="truncate",ee(u,r,f);var p=l.getState("emphasis");ee(p?p.style:null,r,f)}}function ee(t,o,i){var n=t?t.text:null;if(!o&&i.isLeafRoot&&null!=n){var r=e.get("drillDownIcon",!0);t.text=r?r+" "+n:n}}function te(e,s,d,l){var u=null!=L&&o[e][L],c=a[e];return u?(o[e][L]=null,function(e,t){var o=e[D]={};t instanceof b?(o.oldX=t.x,o.oldY=t.y):o.oldShape=(0,n.l7)({},t.shape)}(c,u)):A||((u=new s)instanceof m.ZP&&(u.z2=function(e,t){return e*T+t}(d,l)),function(e,t){var o=e[D]={},n=h.parentNode,s=t instanceof r.Z;if(n&&(!i||"drillDown"===i.direction)){var d=0,l=0,u=a.background[n.getRawIndex()];!i&&u&&u.oldShape&&(d=u.oldShape.width,l=u.oldShape.height),s?(o.oldX=0,o.oldY=l):o.oldShape={x:d,y:l,width:0,height:0}}o.fadein=!s}(c,u)),t[e][D]=u}}(t,u,c,o,h,p,e,i,a,l)}!function e(t,o,i,r,a){function s(e){return e.getId()}function d(n,s){var d=null!=n?t[n]:null,l=null!=s?o[s]:null,h=f(d,l,i,a);h&&e(d&&d.viewChildren||[],l&&l.viewChildren||[],h,r,a+1)}r?(o=t,(0,n.S6)(t,(function(e,t){!e.isRemoved()&&d(t,t)}))):new l.Z(o,t,s,s).add(d).update(d).remove((0,n.WA)(d,null)).execute()}(i.root?[i.root]:[],a&&a.root?[a.root]:[],e,i===a||!a,0);var g=function(e){var t={nodeGroup:[],background:[],content:[]};return e&&(0,n.S6)(e,(function(e,o){var i=t[o];(0,n.S6)(e,(function(e){e&&(i.push(e),G(e).willDelete=!0)}))})),t}(c);return this._oldTree=i,this._storage=u,{lastsForAnimation:h,willDeleteEls:g,renderFinally:function(){(0,n.S6)(g,(function(e){(0,n.S6)(e,(function(e){e.parent&&e.parent.remove(e)}))})),(0,n.S6)(p,(function(e){e.invisible=!0,e.dirty()}))}}},t.prototype._doAnimation=function(e,t,o,i){var a=o.get("animationDurationUpdate"),s=o.get("animationEasing"),d=((0,n.mf)(a)?0:a)||0,l=((0,n.mf)(s)?null:s)||"cubicOut",h=g.o();(0,n.S6)(t.willDeleteEls,(function(e,t){(0,n.S6)(e,(function(e,o){if(!e.invisible){var n,r=e.parent,a=G(r);if(i&&"drillDown"===i.direction)n=r===i.rootNodeGroup?{shape:{x:0,y:0,width:a.nodeWidth,height:a.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var s=0,u=0;a.willDelete||(s=a.nodeWidth/2,u=a.nodeHeight/2),n="nodeGroup"===t?{x:s,y:u,style:{opacity:0}}:{shape:{x:s,y:u,width:0,height:0},style:{opacity:0}}}n&&h.add(e,n,d,0,l)}}))})),(0,n.S6)(this._storage,(function(e,o){(0,n.S6)(e,(function(e,i){var a=t.lastsForAnimation[o][i],s={};a&&(e instanceof r.Z?null!=a.oldX&&(s.x=e.x,s.y=e.y,e.x=a.oldX,e.y=a.oldY):(a.oldShape&&(s.shape=(0,n.l7)({},e.shape),e.setShape(a.oldShape)),a.fadein?(e.setStyle("opacity",0),s.style={opacity:1}):1!==e.style.opacity&&(s.style={opacity:1})),h.add(e,s,d,0,l))}))}),this),this._state="animating",h.finished((0,n.ak)((function(){this._state="ready",t.renderFinally()}),this)).start()},t.prototype._resetController=function(e){var t=this._controller;t||((t=this._controller=new c.Z(e.getZr())).enable(this.seriesModel.get("roam")),t.on("pan",(0,n.ak)(this._onPan,this)),t.on("zoom",(0,n.ak)(this._onZoom,this)));var o=new p.Z(0,0,e.getWidth(),e.getHeight());t.setPointerChecker((function(e,t,i){return o.contain(t,i)}))},t.prototype._clearController=function(){var e=this._controller;e&&(e.dispose(),e=null)},t.prototype._onPan=function(e){if("animating"!==this._state&&(Math.abs(e.dx)>3||Math.abs(e.dy)>3)){var t=this.seriesModel.getData().tree.root;if(!t)return;var o=t.getLayout();if(!o)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:o.x+e.dx,y:o.y+e.dy,width:o.width,height:o.height}})}},t.prototype._onZoom=function(e){var t=e.originX,o=e.originY;if("animating"!==this._state){var i=this.seriesModel.getData().tree.root;if(!i)return;var n=i.getLayout();if(!n)return;var r=new p.Z(n.x,n.y,n.width,n.height),a=this.seriesModel.layoutInfo;t-=a.x,o-=a.y;var s=f.Ue();f.Iu(s,s,[-t,-o]),f.bA(s,s,[e.scale,e.scale]),f.Iu(s,s,[t,o]),r.applyTransform(s),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:r.x,y:r.y,width:r.width,height:r.height}})}},t.prototype._initEvents=function(e){var t=this;e.on("click",(function(e){if("ready"===t._state){var o=t.seriesModel.get("nodeClick",!0);if(o){var i=t.findTarget(e.offsetX,e.offsetY);if(i){var n=i.node;if(n.getLayout().isLeafRoot)t._rootToNode(i);else if("zoomToNode"===o)t._zoomToNode(i);else if("link"===o){var r=n.hostTree.data.getItemModel(n.dataIndex),a=r.get("link",!0),s=r.get("target",!0)||"blank";a&&(0,x.MI)(a,s)}}}}}),this)},t.prototype._renderBreadcrumb=function(e,t,o){var i=this;o||(o=null!=e.get("leafDepth",!0)?{node:e.getViewRoot()}:this.findTarget(t.getWidth()/2,t.getHeight()/2))||(o={node:e.getData().tree.root}),(this._breadcrumb||(this._breadcrumb=new u.Z(this.group))).render(e,t,o.node,(function(t){"animating"!==i._state&&(h.Gx(e.getViewRoot(),t)?i._rootToNode({node:t}):i._zoomToNode({node:t}))}))},t.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage={nodeGroup:[],background:[],content:[]},this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},t.prototype.dispose=function(){this._clearController()},t.prototype._zoomToNode=function(e){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype._rootToNode=function(e){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype.findTarget=function(e,t){var o;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},(function(i){var n=this._storage.background[i.getRawIndex()];if(n){var r=n.transformCoordToLocal(e,t),a=n.shape;if(!(a.x<=r[0]&&r[0]<=a.x+a.width&&a.y<=r[1]&&r[1]<=a.y+a.height))return!1;o={node:i,offsetX:r[0],offsetY:r[1]}}}),this),o},t.type="treemap",t}(v.Z);t.Z=Z}}]);
//# sourceMappingURL=2048.28193797.js.map
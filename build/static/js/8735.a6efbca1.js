"use strict";(self.webpackChunkssv_front=self.webpackChunkssv_front||[]).push([[8735],{58735:function(e,t,n){n.d(t,{N:function(){return Z}});var i=n(48609),a=n(63638),r=n(94060),o=n(52320),s=n(75671),u=n(60886),h=n(8943),l=n(76884),g=n(32911),p=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._layers=[],n}return(0,i.ZT)(t,e),t.prototype.render=function(e,t,n){var i=e.getData(),p=this,d=this.group,c=e.getLayerSeries(),y=i.getLayout("layoutInfo"),f=y.rect,m=y.boundaryGap;function v(e){return e.name}d.x=0,d.y=f.y+m[0];var x=new g.Z(this._layersSeries||[],c,v,v),D=[];function w(t,n,l){var g=p._layers;if("remove"!==t){for(var y,f,m=[],v=[],x=c[n].indices,w=0;w<x.length;w++){var k=i.getItemLayout(x[w]),b=k.x,I=k.y0,L=k.y;m.push(b,I),v.push(b,I+L),y=i.getItemVisual(x[w],"style")}var S=i.getItemLayout(x[0]),Z=e.getModel("label").get("margin"),A=e.getModel("emphasis");if("add"===t){var C=D[n]=new r.Z;f=new a.K({shape:{points:m,stackedOnPoints:v,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),C.add(f),d.add(C),e.isAnimationEnabled()&&f.setClipPath(function(e,t,n){var i=new s.Z({shape:{x:e.x-10,y:e.y-10,width:0,height:e.height+20}});return o.KZ(i,{shape:{x:e.x-50,width:e.width+100,height:e.height+20}},t,n),i}(f.getBoundingRect(),e,(function(){f.removeClipPath()})))}else{C=g[l];f=C.childAt(0),d.add(C),D[n]=C,o.D(f,{shape:{points:m,stackedOnPoints:v}},e),(0,o.Zi)(f)}(0,h.ni)(f,(0,h.k3)(e),{labelDataIndex:x[w-1],defaultText:i.getName(x[w-1]),inheritColor:y.fill},{normal:{verticalAlign:"middle"}}),f.setTextConfig({position:null,local:!0});var T=f.getTextContent();T&&(T.x=S.x-Z,T.y=S.y0+S.y/2),f.useStyle(y),i.setItemGraphicEl(n,f),(0,u.WO)(f,e),(0,u.k5)(f,A.get("focus"),A.get("blurScope"),A.get("disabled"))}else d.remove(g[n])}x.add((0,l.ak)(w,this,"add")).update((0,l.ak)(w,this,"update")).remove((0,l.ak)(w,this,"remove")).execute(),this._layersSeries=c,this._layers=D},t.type="themeRiver",t}(n(52037).Z);var d=p,c=n(80654),y=n(62653),f=n(32670),m=n(76495),v=n(71169),x=n(8467),D=n(6865),w=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return(0,i.ZT)(t,e),t.prototype.init=function(t){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new x.Z(l.ak(this.getData,this),l.ak(this.getRawData,this))},t.prototype.fixData=function(e){var t=e.length,n={},i=(0,v.pv)(e,(function(e){return n.hasOwnProperty(e[0]+"")||(n[e[0]+""]=-1),e[2]})),a=[];i.buckets.each((function(e,t){a.push({name:t,dataList:e})}));for(var r=a.length,o=0;o<r;++o){for(var s=a[o].name,u=0;u<a[o].dataList.length;++u){var h=a[o].dataList[u][0]+"";n[h]=o}for(var h in n)n.hasOwnProperty(h)&&n[h]!==o&&(n[h]=o,e[t]=[h,0,s],t++)}return e},t.prototype.getInitialData=function(e,t){for(var n=this.getReferringComponents("singleAxis",v.C6).models[0].get("type"),i=l.hX(e.data,(function(e){return void 0!==e[2]})),a=this.fixData(i||[]),r=[],o=this.nameMap=l.kW(),s=0,u=0;u<a.length;++u)r.push(a[u][2]),o.get(a[u][2])||(o.set(a[u][2],s),s++);var h=(0,y.Z)(a,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:(0,f.T)(n)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,g=new m.Z(h,this);return g.initData(a),g},t.prototype.getLayerSeries=function(){for(var e=this.getData(),t=e.count(),n=[],i=0;i<t;++i)n[i]=i;var a=e.mapDimension("single"),r=(0,v.pv)(n,(function(t){return e.get("name",t)})),o=[];return r.buckets.each((function(t,n){t.sort((function(t,n){return e.get(a,t)-e.get(a,n)})),o.push({name:n,indices:t})})),o},t.prototype.getAxisTooltipData=function(e,t,n){l.kJ(e)||(e=e?[e]:[]);for(var i,a=this.getData(),r=this.getLayerSeries(),o=[],s=r.length,u=0;u<s;++u){for(var h=Number.MAX_VALUE,g=-1,p=r[u].indices.length,d=0;d<p;++d){var c=a.get(e[0],r[u].indices[d]),y=Math.abs(c-t);y<=h&&(i=c,h=y,g=r[u].indices[d])}o.push(g)}return{dataIndices:o,nestestValue:i}},t.prototype.formatTooltip=function(e,t,n){var i=this.getData(),a=i.getName(e),r=i.get(i.mapDimension("value"),e);return(0,D.TX)("nameValue",{name:a,value:r})},t.type="series.themeRiver",t.dependencies=["singleAxis"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},t}(c.Z),k=w,b=n(11671);function I(e,t){e.eachSeriesByType("themeRiver",(function(e){var t=e.getData(),n=e.coordinateSystem,i={},a=n.getRect();i.rect=a;var r=e.get("boundaryGap"),o=n.getAxis();(i.boundaryGap=r,"horizontal"===o.orient)?(r[0]=b.GM(r[0],a.height),r[1]=b.GM(r[1],a.height),L(t,e,a.height-r[0]-r[1])):(r[0]=b.GM(r[0],a.width),r[1]=b.GM(r[1],a.width),L(t,e,a.width-r[0]-r[1]));t.setLayout("layoutInfo",i)}))}function L(e,t,n){if(e.count())for(var i,a=t.coordinateSystem,r=t.getLayerSeries(),o=e.mapDimension("single"),s=e.mapDimension("value"),u=l.UI(r,(function(t){return l.UI(t.indices,(function(t){var n=a.dataToPoint(e.get(o,t));return n[1]=e.get(s,t),n}))})),h=function(e){for(var t=e.length,n=e[0].length,i=[],a=[],r=0,o=0;o<n;++o){for(var s=0,u=0;u<t;++u)s+=e[u][o][1];s>r&&(r=s),i.push(s)}for(var h=0;h<n;++h)a[h]=(r-i[h])/2;r=0;for(var l=0;l<n;++l){var g=i[l]+a[l];g>r&&(r=g)}return{y0:a,max:r}}(u),g=h.y0,p=n/h.max,d=r.length,c=r[0].indices.length,y=0;y<c;++y){i=g[y]*p,e.setItemLayout(r[0].indices[y],{layerIndex:0,x:u[0][y][0],y0:i,y:u[0][y][1]*p});for(var f=1;f<d;++f)i+=u[f-1][y][1]*p,e.setItemLayout(r[f].indices[y],{layerIndex:f,x:u[f][y][0],y0:i,y:u[f][y][1]*p})}}var S=n(48704);function Z(e){e.registerChartView(d),e.registerSeriesModel(k),e.registerLayout(I),e.registerProcessor((0,S.Z)("themeRiver"))}}}]);
//# sourceMappingURL=8735.a6efbca1.js.map